<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="yes" name="apple-touch-fullscreen"><meta content="telephone=no,email=no" name="format-detection"><meta name="Cache-Type" content="image/gif,image/png,image/jpg"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>登录</title><meta name="description" content=""><meta name="keywords" content="index"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-title" content=""><script src="../js/flexible.js"></script><script src="../js/flexible_css.js"></script><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/login.css"></head><body><div class="navbar"><div class="close_page back_home" id="back"></div><h1>登录</h1><span class="navIcon" id="kefu"></span></div><div class="mainContent" id="main"><div id="login-pwd-box"><div class="login-item tel"><input id="loginTel" type="tel" maxlength="11" placeholder="请输入手机号码"><i class="clear"></i></div><div class="login-item pwd"><input id="loginPwd" type="password" minlength="6" maxlength="16" placeholder="请输入密码"><i class="clear"></i></div><div class="login-text"><p id="messageLoginBtn">免密快捷登录</p><p id="findPwdBtn">忘记密码</p></div><div class="btn login-btn login" id="loginBtn">下一步</div><div class="btn login-btn reg" id="reg-btn">注册送20元大礼包</div><div class="login-other hide"><h2>第三方账号登录</h2><i class="weixin"></i><i class="qq"></i></div></div><div id="login-message-box" class="hide" style="display:none"><div class="reg-item tel"><input id="loginMessageTel" type="tel" maxlength="11" placeholder="请输入手机号码"><i class="clear"></i></div><div class="btn login-btn login" id="getLoginMessage">获取手机验证码</div><div class="login-other hide"><h2>第三方账号登录</h2><i class="weixin"></i><i class="qq"></i></div></div><div id="message-box" class="hide" style="display:none"><h2>验证码已发送至<em id="loginTelText">1xx ---- ****</em></h2><p>请输入验证码</p><div id="message-num"><em></em><em></em><em></em><em></em><em></em><em></em></div><div id="normalBox"><p id="messageTime"><em>60</em>秒后重发验证码<i id="setPasDesc">，或点击<span>设置登录密码</span></i></p><div id="againBtn" class="reg-btn hide">重新发送</div></div><div id="setPasBox" class="hide"><div><div class="pwdfind-item"><div class="pwdfind-wrapper"><input id="setPwd" type="password" minlength="6" maxlength="16" placeholder="设置登录密码(6~16位字符)"></div><i class="clear"></i></div><div id="setPasSubmitBtn" class="reg-btn">提 交</div><p class="colorBlue" id="setPasBoxAgain">重新发送验证码</p></div></div><input id="reqMessage" type="tel" maxlength="6" readonlyunselectable="on"></div></div><div class="mainContent hide" id="mainThird"><div id="pwdfind-box"><div class="pwdfind-item tel"><div class="pwdfind-wrapper"><input id="thirdTel" type="tel" maxlength="11" placeholder="请输入您要绑定的手机号码"></div><i class="clear"></i></div><div class="pwdfind-item pwd"><div class="pwdfind-wrapper"><input id="thirdPwd" type="password" minlength="6" maxlength="16" placeholder="请输入登录密码(6~16位字符)"></div><i class="clear"></i></div><div class="pwdfind-item message"><div class="pwdfind-wrapper"><input id="thirdMes" maxlength="6" placeholder="请输入验证码"><div id="getThirdMes">获取验证码</div></div></div></div><div class="btn login-btn login" id="pwdfind_submit">提交</div><div class="btn login-btn reg" id="jumpBind">跳过手机号码绑定</div><div id="kefuTips">如遇到验证码未收到问题，请点击联系：<span id="kefuOnline">在线客服</span></div></div><script src="../js/zepto.min.js"></script><script src="../js/main.js?v=0.02"></script><script src="../js/md5.js?0.200"></script><script>var ADThirdLoginClick=!1,goNewUser=T.Util.getPara("goNewUser");T.login=function(){var a="LOGIN",n=!0,r=function(e){if(""==e)tip("请输入手机号码");else{if(/^1\d{10}$/.test(e))return!0;tip("手机号码不正确，请重新输入")}},l=function(e){if(""==e)tip("请输入密码");else{if(!(e.length<6))return!0;tip("密码长度小于6位")}},g=function(e){if(""==e)tip("请输入短信验证码");else{if(6==e.length)return!0;tip("请输正确的短信验证码")}},c={init:function(){c.initPage(),c.bindEvent()},initPage:function(){$(".navbar h1").html("登录");T.Storage.get("isSetPwd");var e=T.Storage.get("lastLoginInfo");e&&($("#loginTel").val(e),c.isSetPwdInterface(e)),Global.isAudit&&"1"==Global.isAudit||!T.isNative?$(".login-other").hide():Global.showWeiXin&&Global.showQQ?"1"==Global.showWeiXin&&"1"==Global.showQQ?$(".login-other").show():"1"==Global.showWeiXin?($(".login-other i.qq").hide(),$(".login-other").addClass("single").show()):"1"==Global.showQQ?($(".login-other i.weixin").hide(),$(".login-other").addClass("single").show()):$(".login-other").hide():$(".login-other").show()},isSetPwdInterface:function(o,i){if(r(o)){if(Global.netWorkStatus<=0)return tip(Global.neterror,"error"),!1;if(!n)return!1;n=!1,i&&tip("获取中...","loading"),T.Util.xmlHttpRequest({type:"get",errorType:1,authError:1,reqUrl:"/user/services/template/IS_SET_PWD.json?userAcct="+o,callback:function(e){pageLoading.hide();var t=T.Storage.get("isSetPwd")||{};e.res_data&&e.res_data[0]&&e.res_data[0].IS_SET&&(t[o]=e.res_data[0].IS_SET,T.Storage.set("isSetPwd",t)),i||(n=!0),t&&"1"==t[o]?($("#login-pwd-box").addClass("isSetPwd"),$("#loginBtn").text("登录"),$("#setPasDesc").hide(),n=!0):($("#login-pwd-box").removeClass("isSetPwd"),$("#loginBtn").text("下一步"),$("#setPasDesc").show(),i&&i())},errorCallback:function(){pageLoading.hide(),n=!0;var e=T.Storage.get("isSetPwd")||{};e&&"1"==e[o]?($("#login-pwd-box").addClass("isSetPwd"),$("#loginBtn").text("登录")):($("#login-pwd-box").removeClass("isSetPwd"),$("#loginBtn").text("下一步"),i&&i())}})}},getMessageCode:function(e,t,o){var i={userAcct:e,event:t};T.Util.xmlHttpRequest({type:"post",authError:1,reqData:i,reqUrl:"/user/services/user/sendCode.json",callback:function(e){n=!0,tip("验证码已发送","ok");try{a=e.res_data.value.event}catch(e){tip(Global.neterror,"error")}o(e)},errorCallback:function(){setTimeout(function(){n=!0},1e3)}})},logInInterface:function(t,e,o,i,n){if(r(t)){var s={userAcct:t};if("message"==e){if(!g(o))return;s.validateCode=o}if("pwd"==e){if(!l(o))return;s.passWord=md5(o)}T.Util.xmlHttpRequest({type:"post",errorType:1,authError:1,reqData:s,reqUrl:"/user/services/user/login.json",callback:function(e){T.Util.clearUserInfo(),T.Util.sendToken({token:e.res_data.value.token}),T.Storage.set("access_token",e.res_data.value.token),T.Storage.set("lastLoginInfo",t),T.User.getUInfo(function(e){T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?i():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})},errorCallback:function(e){n&&n(e)}})}},regInterface:function(e,t,o,i){if(r(e)&&g(t)){var n={inviteChannelCode:Global.inviteChannelCode,userAcct:e,validateCode:t};T.Util.xmlHttpRequest({type:"post",errorType:"1",authError:1,reqData:n,reqUrl:"/user/services/user/regist.json",callback:function(e){T.Util.clearUserInfo(),T.Storage.set("access_token",e.res_data.token),T.Util.sendToken({token:e.res_data.token,EVENT:"REG"}),T.User.getUInfo(function(){T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?o():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})},errorCallback:function(e){i(e)}})}},countDown:function(){var e=60,t=setInterval(function(){e--,$("#messageTime em,#setPasBoxAgain").html(e),$("#setPasBoxAgain").html("<em>"+e+"</em>秒重新发送验证码"),0==(dds=e)&&($("#setPasBoxAgain").html("重新发送验证码"),clearInterval(t),$("#againBtn").show(),$("#messageTime").hide())},1e3)},thirdCountDown:function(){var e=60,t=setInterval(function(){e--,$("#getThirdMes").html(e+"秒后重发"),0==(dds=e)&&(clearInterval(t),$("#getThirdMes").html("获取验证码").removeClass("no"))},1e3)},getThirdMessageCode:function(e,t,o){if(r(e)){var i={userAcct:e,event:t};T.Util.xmlHttpRequest({type:"post",reqData:i,reqUrl:"/user/services/user/sendCode.json",callback:function(e){tip("验证码已发送","ok"),o(e)},errorCallback:function(){$("#getThirdMes").removeClass("no")}})}},thirdLoginBind:function(n){$(".navbar h1").html("绑定手机号码"),$("#kefuTips").show(),$("#kefu").hide(),$("#mainThird").show(),$("#main").hide();$("#jumpBind").off().Touch(function(){var e={isBind:2,token:n,inviteChannelCode:Global.inviteChannelCode};T.Util.xmlHttpRequest({type:"post",errorType:1,authError:1,reqData:e,reqUrl:"/user/services/user/tokenConvert.json",callback:function(e){T.Util.clearUserInfo(),T.Util.sendToken({token:e.res_data.value,EVENT:"REG"}),T.Storage.set("access_token",e.res_data.value),T.User.getUInfo(function(){!0,T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?T.Util.back():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})},errorCallback:function(e){!0,tip(e.msg)}})});var s=!0;$("#pwdfind_submit").off().Touch(function(){var e=$("#thirdTel").val().trim(),t=$("#thirdMes").val().trim(),o=$("#thirdPwd").val().trim();if(r(e)&&g(t)&&l(o)){var i={inviteChannelCode:Global.inviteChannelCode,userAcct:e,passWord:md5(o),validateCode:t,token:n};s&&(s=!1,T.Util.xmlHttpRequest({type:"post",errorType:1,authError:1,reqData:i,reqUrl:"/user/services/user/tokenConvert.json",callback:function(e){T.Util.clearUserInfo(),T.Util.sendToken({token:e.res_data.value,EVENT:"REG"}),T.Storage.set("access_token",e.res_data.value),T.User.getUInfo(function(){s=!0,T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?T.Util.back():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})},errorCallback:function(e){s=!0,tip(e.msg),T.Util.clearUserInfo(),T.Util.sendToken({token:""})}}))}}),$("#getThirdMes").off().Touch(function(e){if(!$(e).hasClass("no")){var t=$("#thirdTel").val().trim();c.getThirdMessageCode(t,"REG",function(){$("#getThirdMes").addClass("no"),c.thirdCountDown()})}})},bindEvent:function(){$("#kefu").Touch(function(){T.Util.kefu("h5","来源：登录页面右上角客服入口|用户输入的手机号码："+$("#loginTel").val()||$("#loginMessageTel").val())}),$("#kefuOnline").Touch(function(){T.Util.kefu("h5","来源：登录页面收不到验证码按钮|用户输入的手机号码："+$("#loginTel").val()||$("#loginMessageTel").val())}),$("#back").off().Touch(function(){"block"==$("#mainThird").css("display")?confirm({html:"您确定要取消绑定吗，将导致绑定失败哦。",cancelText:"取消",cancelFun:function(){},okText:"确定",okFun:function(){T.Util.sendToken({token:""}),T.Util.back()}}):"true"==T.Util.getParaSearch("needLogin")?T.Util.back({num:2}):T.Util.back()}),$("#messageTime").off().Touch(function(){$("#setPasBox").show(),$("#normalBox").hide()}),$("#setPasSubmitBtn").off().Touch(function(){var t=$("#reqMessage"),e=$("#setPwd").val(),o=$("#loginTel").val().trim(),i=t.val().trim();if(r(o)&&g(i)&&l(e))if("LOGIN"==a){var n="/user/services/user/login.json",s={userAcct:o,validateCode:i,passWord:md5(e)};T.Util.xmlHttpRequest({type:"post",errorType:1,authError:1,reqData:s,reqUrl:n,callback:function(e){T.Util.clearUserInfo(),T.Util.sendToken({token:e.res_data.value.token}),T.Storage.set("access_token",e.res_data.value.token),T.User.getUInfo(function(){T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?T.Util.back():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})},errorCallback:function(e){e&&("1001"==e.msg_code&&($("#message-num").find("em").html(""),t.val(""),t.focus()),setTimeout(function(){tip(e.msg)},400))}})}else{n="/user/services/user/regist.json",s={inviteChannelCode:Global.inviteChannelCode,userAcct:o,validateCode:i,passWord:md5(e)};T.Util.xmlHttpRequest({type:"post",errorType:"1",authError:1,reqData:s,reqUrl:n,callback:function(e){T.Util.clearUserInfo(),T.Storage.set("access_token",e.res_data.token),T.Util.sendToken({token:e.res_data.token,EVENT:"REG"}),T.User.getUInfo(function(){T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?T.Util.back():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})},errorCallback:function(e){"1001"==e.msg_code&&($("#message-num").find("em").html(""),t.val(""),t.focus()),tip(e.msg)}})}}),$("#loginBtn").off().Touch(function(){var i=$("#loginTel").val().trim();if($("#login-pwd-box").is(".isSetPwd")){var e=$("#loginPwd").val().trim();c.logInInterface(i,"pwd",e,function(){T.Util.back()},function(e){setTimeout(function(){e?tip(e.msg):tip(Global.neterror,"error")},400)})}else{var t=T.Storage.get("isSetPwd")||{};t&&"1"==t[i]?($("#login-pwd-box").addClass("isSetPwd"),$("#loginBtn").text("登录")):($("#login-pwd-box").removeClass("isSetPwd"),$("#loginBtn").text("下一步"),c.isSetPwdInterface(i,function(){c.getMessageCode(i,"LOGIN",function(){if(n=!0,T.isNative&&"Android"==Global.OS){document.addEventListener("EVENT_GET_VERIFY_CODE",function e(t){payHasReturn=!0,console.log("EVENT_getVerifyCodeResult"+JSON.stringify(t.result)),document.removeEventListener("EVENT_GET_VERIFY_CODE",e,!1)},!1),api.getVerifyCode()}$("#loginTelText").html(i.substring(0,3)+" "+i.substring(3,7)+" "+i.substring(7,11)),$("#againBtn").hide(),$("#messageTime").show(),$("#message-box").show().siblings().hide();var o=$("#reqMessage");c.countDown(),o.focus(),o.off().keyup(function(){for(var e=o.val().split(""),t=0;t<6;t++)$("#message-num").find("em").eq(t).html(e[t]);"block"!=$("#setPasBox").css("display")&&6<=e.length&&("LOGIN"==a?c.logInInterface(i,"message",o.val().trim(),function(){T.Util.back()},function(e){e&&("1001"==e.msg_code&&($("#message-num").find("em").html(""),o.val(""),o.focus()),setTimeout(function(){tip(e.msg)},400))}):c.regInterface(i,o.val().trim(),function(e){T.Util.back()},function(e){"1001"==e.msg_code&&($("#message-num").find("em").html(""),o.val(""),o.focus()),tip(e.msg)}))})})}))}},{noRepeat:!0}),$("#getLoginMessage,#againBtn,#setPasBoxAgain").off().Touch(function(e){var i=T.Util.trim($("#loginMessageTel").val())||T.Util.trim($("#loginTel").val());("getLoginMessage"!=$(e).attr("id")||r(i))&&("setPasBoxAgain"==$(e).attr("id")&&0<$(e).find("em").length||c.getMessageCode(i,"LOGIN",function(){if(T.isNative&&"Android"==Global.OS){document.addEventListener("EVENT_GET_VERIFY_CODE",function e(t){payHasReturn=!0,console.log("EVENT_getVerifyCodeResult"+JSON.stringify(t.result)),document.removeEventListener("EVENT_GET_VERIFY_CODE",e,!1)},!1),api.getVerifyCode()}$("#loginTelText").html(i.substring(0,3)+" "+i.substring(3,7)+" "+i.substring(7,11)),$("#againBtn").hide(),$("#messageTime").show(),$("#message-box").show().siblings().hide();var o=$("#reqMessage");c.countDown(),o.focus(),o.off().keyup(function(){for(var e=o.val().split(""),t=0;t<6;t++)$("#message-num").find("em").eq(t).html(e[t]);"block"!=$("#setPasBox").css("display")&&6<=e.length&&("LOGIN"==a?c.logInInterface(i,"message",o.val().trim(),function(){T.Util.back()},function(e){e&&("1001"==e.msg_code&&"验证码错误"==e.msg&&($("#message-num").find("em").html(""),o.val(""),o.focus()),tip(e.msg))}):c.regInterface(i,o.val().trim(),function(e){T.Util.back()},function(e){"1001"==e.msg_code&&($("#message-num").find("em").html(""),o.val(""),o.focus()),tip(e.msg)}))})}))}),$(".login-other i").off().Touch(function(e){var t="QQ";$(e).hasClass("weixin")&&(t="WEIXIN"),T.Util.thirdLogin(t,function(e){console.log("EVENT_thirdLogin---result:"+JSON.stringify(e)),("Android"!=Global.OS||"Android"==Global.OS&&101<T.Util.getAppVersion(T.Util.getAppInfo("appVersion")))&&(-1<e.accessToken.indexOf("-")?c.thirdLoginBind(e.accessToken):(T.Storage.set("access_token",e.accessToken),T.User.getUInfo(function(){T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?T.Util.back():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"})))}),ADThirdLoginClick=!0}),$("#messageLoginBtn").off().Touch(function(){var e=T.Util.trim($("#loginTel").val());e&&$("#loginMessageTel").val(e),$("#login-message-box").show().siblings().hide()}),$("#message-num").off().Touch(function(){$("#reqMessage").focus()}),$("#findPwdBtn").off().Touch(function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/user/findPwd.html")}),$("#reg-btn,#reg-btnA").off().Touch(function(){"1"==goNewUser?T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/user/reg.html?from=login&goNewUser=1"):T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/user/reg.html?from=login")}),$("input").on("input",function(){T.Storage.get("isSetPwd");var e=$("#loginTel").val().trim();/^1\d{10}$/.test(e)||($("#login-pwd-box").removeClass("isSetPwd"),$("#loginBtn").text("下一步")),0<$(this).val().length?$(this).parent().addClass("writing"):$(this).parent().removeClass("writing")}),$("#loginTel").on("focus",function(){$("#login-pwd-box").removeClass("isSetPwd"),$("#loginBtn").text("下一步")}),$("input").on("blur",function(){$(this).parent().removeClass("writing")}),$(".clear").off().Touch(function(){$(this).parent().find("input").val(""),$(this).parent().removeClass("writing")})}};return{thirdLoginBind:c.thirdLoginBind,init:c.init}}(),$(document).ready(function(){T.isNative?T.appToH5.init(function(){T.login.init()},function(){if("Android"==Global.OS&&ADThirdLoginClick){ADThirdLoginClick=!1;var t=setInterval(function(){T.appToH5.init(function(){if(!T.Util.isEmpty(T.Storage.get("access_token"))){window.clearInterval(t);var e=T.Storage.get("access_token");-1<e.indexOf("-")?T.login.thirdLoginBind(e):(T.Storage.set("access_token",e),T.User.getUInfo(function(){T.Util.isEmpty(T.Storage.get("userinfo").isNew)||"1"!=T.Storage.get("userinfo").isNew||"1"!=goNewUser||"1"==Global.isAudit?T.Util.back():window.location.href=T.Util.getRootPath()+"/"+Global.webRoot+"/view/go.html#page=newUser.html"}))}})},500)}},function(){},function(){},function(){}):T.login.init()})</script></body></html>