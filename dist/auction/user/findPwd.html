<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="yes" name="apple-touch-fullscreen"><meta content="telephone=no,email=no" name="format-detection"><meta name="Cache-Type" content="image/gif,image/png,image/jpg"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>忘记密码</title><meta name="description" content=""><meta name="keywords" content="index"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-title" content=""><script src="../js/flexible.js"></script><script src="../js/flexible_css.js"></script><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/login.css"></head><body><div class="navbar"><div class="back_arrow back_home" id="back"></div><h1>忘记密码</h1><span class="navIcon" id="kefu"></span></div><div class="mainContent" id="main"><div id="pwdfind-box"><div class="pwdfind-item tel"><div class="pwdfind-wrapper"><input id="tel" type="tel" maxlength="11" placeholder="请输入手机号码"></div><i class="clear"></i></div><div class="pwdfind-item pwd"><div class="pwdfind-wrapper"><input id="pwd" type="password" minlength="6" maxlength="16" placeholder="请输入新密码"></div><i class="clear"></i></div><div class="pwdfind-item message"><div class="pwdfind-wrapper"><input id="message" maxlength="6" placeholder="请输入验证码"><div id="getMessage">获取验证码</div></div></div></div><div class="pwdfind-btn" id="pwdfind_submit">提交</div></div><script src="../js/zepto.min.js"></script><script src="../js/main.js?v=0.01"></script><script src="../js/md5.js?0.200"></script><script>T.findPassword=function(){var n=!1,o=!0,s=function(t){if(""==t)tip("请输入手机号码！");else{if(/^1\d{10}$/.test(t))return!0;tip("手机号码不正确，请重新输入")}},a=function(t){if(""==t)tip("请输入新密码！");else{if(!(t.length<6))return!0;tip("密码长度小于6位！")}},u=function(t){if(""==t)tip("请输入短信验证码！");else{if(6==t.length)return!0;tip("请输正确的短信验证码！")}},r={init:function(){r.initPage(),r.bindEvent()},initPage:function(){var t=T.Storage.get("lastLoginInfo");t&&/^1[0-9]{10}$/.test(t)&&$("#tel").val(t)},bindEvent:function(){$("#kefu").Touch(function(){T.Util.kefu("h5","来源：忘记密码右上角|用户输入的手机号码："+$("#tel").val())}),$("#getMessage").off().Touch(function(t){if(!$(t).hasClass("no")){var e=$("#tel").val().trim();r.getMessageCode(e,"FORGET",function(){n=!0,$("#getMessage").addClass("no"),r.countDown()})}}),$("#pwdfind_submit").off().Touch(function(){n?r.findPwd($("#tel").val().trim(),$("#pwd").val().trim(),$("#message").val().trim()):tip("请获取短信验证码")}),$("input").on("input",function(){T.Util.trim($("#tel").val());0<$(this).val().length?$(this).parent().parent().addClass("writing"):$(this).parent().parent().removeClass("writing")}),$("input").on("blur",function(){$(this).parent().parent().removeClass("writing")}),$(".clear").off().Touch(function(){$(this).parent().find("input").val(""),$(this).parent().removeClass("writing")})},countDown:function(){var t=60,e=setInterval(function(){t--,$("#getMessage").html(t+"秒后重发!"),0==(dds=t)&&(clearInterval(e),$("#getMessage").html("获取验证码").removeClass("no"))},1e3)},getMessageCode:function(t,e,n){if(s(t)){var i={userAcct:t,event:e};T.Util.xmlHttpRequest({type:"post",reqData:i,reqUrl:"/user/services/user/sendCode.json",callback:function(t){tip("验证码已发送","ok"),n(t)},errorCallback:function(){$("#getMessage").removeClass("no")}})}},findPwd:function(e,n,t){if(s(e)&&a(n)&&u(t)){var i={userMobile:e,passWord:md5(n),validateCode:t};if(!o)return!1;o=!1,T.Util.xmlHttpRequest({type:"post",reqData:i,reqUrl:"/user/services/user/forgetPwd.json",callback:function(t){r.logInInterface(e,"pwd",n,function(){tip("密码重置成功","ok"),setTimeout(function(){o=!0,T.Util.back({index:4})},3e3)},function(t){o=!0,setTimeout(function(){t?tip(t.msg):tip(Global.neterror,"error")},400)})},errorCallback:function(){o=!0}})}},logInInterface:function(t,e,n,i,o){if(s(t)){var r={userAcct:t};if("message"==e){if(!u(n))return;r.validateCode=n}if("pwd"==e){if(!a(n))return;r.passWord=md5(n)}T.Util.xmlHttpRequest({type:"post",errorType:1,reqData:r,reqUrl:"/user/services/user/login.json",callback:function(t){T.Storage.set("access_token",t.res_data.value.token),T.Util.sendToken({token:t.res_data.value.token}),T.User.getUInfo(function(){i()})},errorCallback:function(t){o&&o(t)}})}}};return{init:r.init}}(),$(document).ready(function(){T.isNative?T.appToH5.init(function(){T.findPassword.init()},function(){},function(){},function(){},function(){}):T.findPassword.init()})</script></body></html>