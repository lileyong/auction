<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="yes" name="apple-touch-fullscreen"><meta content="telephone=no,email=no" name="format-detection"><meta name="Cache-Type" content="image/gif,image/png,image/jpg"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>添加银行卡</title><meta name="description" content=""><meta name="keywords" content="index"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-title" content=""><script src="../js/flexible.js"></script><script src="../js/flexible_css.js"></script><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/user.css"></head><body><div class="navbar"><div class="back_arrow back_home" id="back"></div><h1>添加银行卡</h1></div><div class="mainContent" id="main"><div id="addbankcard-box"><div class="addbankcard-head"><h2>银行卡开户名与账户真实姓名须一致</h2></div><div class="addbankcard-item username"><h2>开户姓名</h2><input id="username" type="text" maxlength="15"><i class="doubt"></i></div><div class="addbankcard-item cardno"><h2>银行卡号</h2><input id="cardno" type="tel" maxlength="25" placeholder="请输入银行卡号"><i class="clear"></i></div><div class="banktype"></div><div id="addbankcard-submit">确认添加</div><p class="addbankcard-text">为了更好的提现体验，<em id="supportbank">了解支持银行</em></p></div></div><script src="../js/zepto.min.js"></script><script src="../js/main.js?v=0.01"></script><script>T.addBankCard=function(){var t=!1,r=!0,e=[!1,!1],a=function(t){if(""==t)tip("请输入银行卡号!");else if(t.length<15||25<t.length)tip("您的银行卡号不正确 ，请重新输入");else{if(r)return!0;tip("您的银行卡号不正确 ，请重新输入")}},c={init:function(){var t=T.Storage.get("userinfo");c.isCertificate()?$("#username").val(t.realName.slice(0,1)+"**").attr("readonly","readonly"):($("#username").attr("placeholder","请输入开户姓名"),confirm({html:"请先进行实名认证",okFun:function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/user/identityInfo.html")},cancelFun:function(){T.Util.back()}})),c.loadJS(),c.bindEvent()},isCertificate:function(){var t=T.Storage.get("userinfo");if(t)return!(!t.realName||!t.idCard);T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/user/login.html")},loadJS:function(){$.getScript(Global.fullHost+"/res/native/bankCard/bankIssuing.js?"+Math.random(),function(){e[0]=!0},function(){t||(t=!0,tip(Global.neterror,"error"))}),$.getScript(Global.fullHost+"/res/native/bankCard/bankValidata.js?"+Math.random(),function(){e[1]=!0},function(){t||(t=!0,tip(Global.neterror,"error"))})},getBankInfo:function(t){try{for(var n=bankValidate.bankBin,a=0;a<n.length;a++)for(var r=n[a].cname,e=c.getBankId(r),i=bankContrast[e],o=n[a].bin.split("|"),l=0;l<o.length;l++)if(parseInt(o[l].slice(0,o[l].length))==parseInt(t.slice(0,o[l].length))){return{bankid:e,bankname:r,bankicon:i?i[3]:"/auction/img/usercenter/icon_bank.png",bankcolor:i?i[2]:"#999",issupport:i?i[1]:"1",cardtype:"储蓄卡"}}}catch(t){return!1}},getBankId:function(t){try{for(var n in bankContrast)if(t==bankContrast[n][0])return n}catch(t){return!1}},getSupportBank:function(){try{var t=[];for(var n in bankContrast)"1"==bankContrast[n][1]&&t.push(bankContrast[n][0]);return t}catch(t){return tip(Global.neterror,"error"),!1}},getBankCardList:function(a){T.Util.xmlHttpRequest({type:"get",reqUrl:"/user/services/user/bankCardList.json",callback:function(t){var n=t.res_data.value.INFO;a&&a(n),T.Storage.set("bankCardList",n)},errorCallback:function(){}})},bindEvent:function(){$("#cardno").on("input",function(){0<$(this).val().length?$(this).parent().addClass("writing"):$(this).parent().removeClass("writing");var a=$("#cardno").val();if(T.cardNo||(T.cardNo=""),a.length>T.cardNo.length){if(!a.slice(-1).match(/\d/))return $("#cardno").val(T.cardNo),!1;4<=(a=T.Util.trim(a)).length&&$(this).val(a.match(/\d{4}/g).join(" ")+" "+a.slice(a.length-a.length%4,a.length))}T.cardNo=$("#cardno").val(),clearTimeout(T.cardNoCheck),T.cardNoCheck=setTimeout(function(){if((a=T.Util.trim($("#cardno").val())).length){if(8<=a.length)if(e[0]&&e[1]){var t=c.getBankInfo(a);if(t&&"1"==t.issupport){r=!0;var n='<i style="background:url('+Global.fullHost+t.bankicon+') 0 0 / 100% 100% no-repeat;"></i>';$(".banktype").html(n+t.bankname+"--"+t.cardtype),$("#addbankcard-submit").removeClass("disabled")}else{r=!1;n='<i style="background:url(../img/bank_icon/00.png) 0 0 / 100% 100% no-repeat;"></i>';$(".banktype").html(n+'<em class="red">不支持该银行卡</em>'),$("#addbankcard-submit").addClass("disabled")}}else tip(Global.neterror,"error")}else $(".banktype").html(""),$("#addbankcard-submit").removeClass("disabled")},500)}),$("input").on("blur",function(){$(this).parent().removeClass("writing")}),$(".clear").off().Touch(function(){$(this).parent().find("input").val(""),$(this).parent().removeClass("writing"),$(".banktype").html(""),$("#addbankcard-submit").removeClass("disabled")}),$("#addbankcard-submit").off().Touch(function(t){if($(t).hasClass("disabled"))return!1;var n=T.Util.trim($("#cardno").val());if(!a(n))return!1;T.Util.xmlHttpRequest({type:"get",reqUrl:"/user/services/user/addBankcard.json?cardNo="+T.cardNo,callback:function(t){tip("添加成功！","ok"),c.getBankCardList(function(){setTimeout(function(){T.Util.back()},3e3)})},errorCallback:function(){}})}),$(".doubt").off().Touch(function(){alert('<h2>开户姓名说明</h2><p style="font-size:0.32rem">为保证提现资金安全到达，只能绑定<b>已通过身份验证</b>本人的银行卡！</p>',function(){},"知道了")}),$("#supportbank").off().Touch(function(){try{var t=c.getSupportBank();alert('<h2>支持哪些银行？</h2><p style="font-size:0.2933334rem;">目前共支持'+t.length+"家银行卡提现，分别为"+t.join("、")+"</p>",function(){},"知道了")}catch(t){tip(Global.neterror,"error")}})}};return{init:c.init}}(),$(document).ready(function(){T.isNative?T.appToH5.init(function(){T.addBankCard.init()},function(){T.addBankCard.init()},function(){},function(){},function(){}):T.addBankCard.init()})</script></body></html>