<!DOCTYPE html><html lang="en" style="background-color:#d8313a"><head><meta charset="utf-8"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="yes" name="apple-touch-fullscreen"><meta content="telephone=no,email=no" name="format-detection"><meta name="Cache-Type" content="image/gif,image/png,image/jpg"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>新用户豪享</title><meta name="description" content=""><meta name="keywords" content="index"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-title" content=""><script src="../js/flexible.js"></script><script src="../js/flexible_css.js"></script><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/inviteReg.css"></head><body><div class="mainContent noNavbar" id="main"><div class="content" id="content"><img src="../img/activity/invite/regbg.jpg" id="bg"><div id="inviteRegBox"><form id="regForm"><div class="formItem"><input type="tel" maxlength="11" placeholder="请输入注册手机号码" id="tel"><i class="clear"></i></div><div class="formItem"><input type="tel" maxlength="6" placeholder="请输入注册手机号码" id="messageCode"><em id="getMessage">获取验证码</em></div><div class="formBtn" id="receive"></div><div class="formBtn" id="download" class="download"></div><div class="formBtn" id="kefu"></div></form></div></div></div><script src="../js/zepto.min.js"></script><script src="../js/main.js"></script><script src="../js/md5.js"></script><script>T.inviteReg=function(){var o=!0,t=!1,i=T.Util.getPara("inviteCode"),n=function(e){if(e){if(/^1[0-9]{10}$/.test(e))return!0;tip("号码不正确，请重新输入")}else tip("请输入手机号码")},a=function(e){if(t)if(e){if(/^[0-9]{6}$/.test(e))return!0;tip("请输入正确的验证码"),$("#messageCode").val("")}else tip("请输入验证码");else tip("请获取验证码")},r={init:function(){r.bindEvent(),T.Util.initAppDownload()},bindEvent:function(){$("#kefu").Touch(function(){T.Util.kefu("h5","来源：新用户豪享页面|用户输入的手机号码："+$("#tel").val())}),$("#getMessage").off().Touch(function(){var e=T.Util.trim($("#tel").val());return!!n(e)&&(!t&&void r.getMessageCode(e,"REG",function(){t=o=!0,clearTimeout(T.messageTimeOut),T.messageTimeOut=setTimeout(function(){t=!1},6e4),r.countDown()}))}),$("#receive").off().Touch(function(){var e=T.Util.trim($("#tel").val()),t=T.Util.trim($("#messageCode").val());return!!n(e)&&(!!a(t)&&void r.reg(e,t))}),$("#download").off().Touch(function(){T.Util.appDownload()}),$("input").on("input",function(){0<$(this).val().length?$(this).parent().addClass("writing"):$(this).parent().removeClass("writing"),$("#tel").val()!=T.inputVal&&(t=!1,$("#getMessage").html("获取验证码"),clearInterval(T.messageTimer)),T.inputVal=$("#tel").val()}),$("input").on("blur",function(){$(this).parent().removeClass("writing")}),$(".clear").off().Touch(function(){$(this).parent().find("input").val(""),$(this).parent().removeClass("writing")})},countDown:function(){var e=60;T.messageTimer=setInterval(function(){e--,$("#getMessage").html(e+"s"),0==e&&(t=!1,$("#getMessage").html("获取验证码"),clearInterval(T.messageTimer))},1e3)},getMessageCode:function(e,t,i){var n={userAcct:e,event:t};if(!o)return!1;o=!1,T.Util.xmlHttpRequest({type:"post",authError:1,reqData:n,reqUrl:"/user/services/user/sendCode.json",callback:function(e){o=!0,tip("验证码已发送","ok");try{e.res_data.value.event}catch(e){tip(Global.neterror,"error")}i(e)},errorCallback:function(){setTimeout(function(){o=!0},1e3)}})},reg:function(e,t){if(!o)return!1;o=!1,tip("正在提交注册信息","loading"),T.Util.xmlHttpRequest({type:"get",errorType:1,reqUrl:"/commodity/services/invite/addInvite.json?code="+i+"&userMobile="+e+"&validateCode="+t,callback:function(e){o=!0,pageLoading.hide(),e.res_data&&e.res_data.value?(T.Util.clearUserInfo(),T.Storage.set("access_token",e.res_data.value.token),T.User.getUInfo(function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/activity/inviteDl.html")})):data&&tip(data.msg)},errorCallback:function(e){o=!0,pageLoading.hide(),e&&"1017"==e.msg_code?setTimeout(function(){confirm({html:"手机号已注册，请下载APP",cancelText:"取消",okText:"立即下载",okFun:function(){T.Util.appDownload()}})},400):e&&tip(e.msg),e&&"验证码输入错误"==e.msg&&$("#messageCode").val("")}})}};return{init:r.init}}(),$(document).ready(function(){T.isNative?T.appToH5.init(function(){T.inviteReg.init()},function(){T.inviteReg.init()},function(){},function(){},function(){}):T.inviteReg.init()})</script></body></html>