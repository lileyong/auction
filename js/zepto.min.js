var Zepto=function(){function a(e){return null==e?""+e:B[V.call(e)]||"object"}function o(e){return"function"==a(e)}function r(e){return null!=e&&e==e.window}function c(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function s(e){return"object"==a(e)}function u(e){return s(e)&&!r(e)&&Object.getPrototypeOf(e)==Object.prototype}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function n(e){return e in t?t[e]:t[e]=RegExp("(^|\\s)"+e+"(\\s|$)")}function i(e){return"children"in e?S.call(e.children):y.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function d(e,t){return null==t?y(e):y(e).filter(t)}function f(e,t,n,i){return o(t)?t.call(e,n,i):t}function h(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function p(e,t){var n=e.className,i=n&&n.baseVal!==m;return t===m?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function g(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?y.parseJSON(t):t:e):t}catch(e){return t}}var m,v,y,w,_,I,T=[],S=T.slice,E=T.filter,b=window.document,C={},t={},A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},M=/^\s*<(\w+|!)[^>]*>/,O=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,x=/^(?:body|html)$/i,P=/([A-Z])/g,k="val css html text data width height offset".split(" "),e=b.createElement("table"),D=b.createElement("tr"),L={tr:b.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:D,th:D,"*":b.createElement("div")},U=/complete|loaded|interactive/,R=/^[\w-]*$/,B={},V=B.toString,j={},J=b.createElement("div"),q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},$=Array.isArray||function(e){return e instanceof Array};return j.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;if(i=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)return i.call(e,t);var n,i,o=!(i=e.parentNode);return o&&(i=J).appendChild(e),n=~j.qsa(i,t).indexOf(e),o&&J.removeChild(e),n},_=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},I=function(n){return E.call(n,function(e,t){return n.indexOf(e)==t})},j.fragment=function(e,t,n){var i,o,r;return O.test(e)&&(i=y(b.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(N,"<$1></$2>")),t===m&&(t=M.test(e)&&RegExp.$1),t in L||(t="*"),(r=L[t]).innerHTML=""+e,i=y.each(S.call(r.childNodes),function(){r.removeChild(this)})),u(n)&&(o=y(i),y.each(n,function(e,t){-1<k.indexOf(e)?o[e](t):o.attr(e,t)})),i},j.Z=function(e,t){return(e=e||[]).__proto__=y.fn,e.selector=t||"",e},j.isZ=function(e){return e instanceof j.Z},j.init=function(e,t){var n,i;if(!e)return j.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&M.test(e))n=j.fragment(e,RegExp.$1,t),e=null;else{if(t!==m)return y(t).find(e);n=j.qsa(b,e)}else{if(o(e))return y(b).ready(e);if(j.isZ(e))return e;if($(e))i=e,n=E.call(i,function(e){return null!=e});else if(s(e))n=[e],e=null;else if(M.test(e))n=j.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==m)return y(t).find(e);n=j.qsa(b,e)}}return j.Z(n,e)},(y=function(e,t){return j.init(e,t)}).extend=function(t){var n,e=S.call(arguments,1);return"boolean"==typeof t&&(n=t,t=e.shift()),e.forEach(function(e){!function e(t,n,i){for(v in n)i&&(u(n[v])||$(n[v]))?(u(n[v])&&!u(t[v])&&(t[v]={}),$(n[v])&&!$(t[v])&&(t[v]=[]),e(t[v],n[v],i)):n[v]!==m&&(t[v]=n[v])}(t,e,n)}),t},j.qsa=function(e,t){var n,i="#"==t[0],o=!i&&"."==t[0],r=i||o?t.slice(1):t,s=R.test(r);return c(e)&&s&&i?(n=e.getElementById(r))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:S.call(s&&!i?o?e.getElementsByClassName(r):e.getElementsByTagName(t):e.querySelectorAll(t))},y.contains=function(e,t){return e!==t&&e.contains(t)},y.type=a,y.isFunction=o,y.isWindow=r,y.isArray=$,y.isPlainObject=u,y.isEmptyObject=function(e){for(var t in e)return!1;return!0},y.inArray=function(e,t,n){return T.indexOf.call(t,e,n)},y.camelCase=_,y.trim=function(e){return null==e?"":String.prototype.trim.call(e)},y.uuid=0,y.support={},y.expr={},y.map=function(e,t){var n,i,o=[];if("number"==typeof e.length)for(i=0;i<e.length;i++)null!=(n=t(e[i],i))&&o.push(n);else for(i in e)null!=(n=t(e[i],i))&&o.push(n);return 0<o.length?y.fn.concat.apply([],o):o},y.each=function(e,t){var n;if("number"==typeof e.length)for(n=0;n<e.length&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},y.grep=function(e,t){return E.call(e,t)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){B["[object "+t+"]"]=t.toLowerCase()}),y.fn={forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,indexOf:T.indexOf,concat:T.concat,map:function(n){return y(y.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return y(S.apply(this,arguments))},ready:function(e){return U.test(b.readyState)&&b.body?e(y):b.addEventListener("DOMContentLoaded",function(){e(y)},!1),this},get:function(e){return e===m?S.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return T.every.call(this,function(e,t){return!1!==n.call(e,t,e)}),this},filter:function(t){return o(t)?this.not(this.not(t)):y(E.call(this,function(e){return j.matches(e,t)}))},add:function(e,t){return y(I(this.concat(y(e,t))))},is:function(e){return 0<this.length&&j.matches(this[0],e)},not:function(t){var n=[];if(o(t)&&t.call!==m)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):"number"==typeof t.length&&o(t.item)?S.call(t):y(t);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return y(n)},has:function(e){return this.filter(function(){return s(e)?y.contains(this,e):y(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!s(e)?e:y(e)},last:function(){var e=this[this.length-1];return e&&!s(e)?e:y(e)},find:function(e){var n=this;return"object"==typeof e?y(e).filter(function(){var t=this;return T.some.call(n,function(e){return y.contains(e,t)})}):1==this.length?y(j.qsa(this[0],e)):this.map(function(){return j.qsa(this,e)})},closest:function(e,t){var n=this[0],i=!1;for("object"==typeof e&&(i=y(e));n&&!(i?0<=i.indexOf(n):j.matches(n,e));)n=n!==t&&!c(n)&&n.parentNode;return y(n)},parents:function(e){for(var t=[],n=this;0<n.length;)n=y.map(n,function(e){return(e=e.parentNode)&&!c(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return d(t,e)},parent:function(e){return d(I(this.pluck("parentNode")),e)},children:function(e){return d(this.map(function(){return i(this)}),e)},contents:function(){return this.map(function(){return S.call(this.childNodes)})},siblings:function(e){return d(this.map(function(e,t){return E.call(i(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return y.map(this,function(e){return e[t]})},show:function(){return this.each(function(){if("none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")){var e,t,n,i=this.style;e=this.nodeName,C[e]||(t=b.createElement(e),b.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),C[e]=n),e=C[e],i.display=e}})},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=y(this);(t===m?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return y(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return y(this.pluck("nextElementSibling")).filter(e||"*")},html:function(n){return 0===arguments.length?0<this.length?this[0].innerHTML:null:this.each(function(e){var t=this.innerHTML;y(this).empty().append(f(this,n,e,t))})},text:function(e){return 0===arguments.length?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=e===m?"":""+e})},attr:function(t,n){var e;return"string"==typeof t&&n===m?0==this.length||1!==this[0].nodeType?m:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(e=this[0].getAttribute(t))&&t in this[0]?this[0][t]:e:this.each(function(e){if(1===this.nodeType)if(s(t))for(v in t)h(this,v,t[v]);else h(this,t,f(this,n,e,this.getAttribute(t)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&h(this,e)})},prop:function(t,n){return t=q[t]||t,n===m?this[0]&&this[0][t]:this.each(function(e){this[t]=f(this,n,e,this[t])})},data:function(e,t){var n=this.attr("data-"+e.replace(P,"-$1").toLowerCase(),t);return null!==n?g(n):m},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=f(this,t,e,this.value)})},offset:function(i){if(i)return this.each(function(e){var t=y(this),n=(e=f(this,i,e,t.offset()),t.offsetParent().offset());e={top:e.top-n.top,left:e.left-n.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var n=this[0],i=getComputedStyle(n,"");if(!n)return;if("string"==typeof e)return n.style[_(e)]||i.getPropertyValue(e);if($(e)){var o={};return y.each($(e)?e:[e],function(e,t){o[t]=n.style[_(t)]||i.getPropertyValue(t)}),o}}var r="";if("string"==a(e))t||0===t?r=l(e)+":"+("number"!=typeof t||A[l(e)]?t:t+"px"):this.each(function(){this.style.removeProperty(l(e))});else for(v in e)e[v]||0===e[v]?r+=l(v)+":"+("number"!=typeof e[v]||A[l(v)]?e[v]:e[v]+"px")+";":this.each(function(){this.style.removeProperty(l(v))});return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(y(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&T.some.call(this,function(e){return this.test(p(e))},n(e))},addClass:function(n){return n?this.each(function(e){w=[];var t=p(this);f(this,n,e,t).split(/\s+/g).forEach(function(e){y(this).hasClass(e)||w.push(e)},this),w.length&&p(this,t+(t?" ":"")+w.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===m?p(this,""):(w=p(this),f(this,t,e,w).split(/\s+/g).forEach(function(e){w=w.replace(n(e)," ")}),void p(this,w.trim()))})},toggleClass:function(n,i){return n?this.each(function(e){var t=y(this);f(this,n,e,p(this)).split(/\s+/g).forEach(function(e){(i===m?!t.hasClass(e):i)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===m?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===m?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=x.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(y(e).css("margin-top"))||0,n.left-=parseFloat(y(e).css("margin-left"))||0,i.top+=parseFloat(y(t[0]).css("border-top-width"))||0,i.left+=parseFloat(y(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||b.body;e&&!x.test(e.nodeName)&&"static"==y(e).css("position");)e=e.offsetParent;return e})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(i){var o=i.replace(/./,function(e){return e[0].toUpperCase()});y.fn[i]=function(t){var e,n=this[0];return t===m?r(n)?n["inner"+o]:c(n)?n.documentElement["scroll"+o]:(e=this.offset())&&e[i]:this.each(function(e){(n=y(this)).css(i,f(this,t,e,n[i]()))})}}),["after","prepend","before","append"].forEach(function(t,r){var s=r%2;y.fn[t]=function(){var t,n,i=y.map(arguments,function(e){return"object"==(t=a(e))||"array"==t||null==e?e:j.fragment(e)}),o=1<this.length;return i.length<1?this:this.each(function(e,t){n=s?t:t.parentNode,t=0==r?t.nextSibling:1==r?t.firstChild:2==r?t:null,i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!n)return y(e).remove();!function e(t,n){for(var i in n(t),t.childNodes)e(t.childNodes[i],n)}(n.insertBefore(e,t),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},y.fn[s?t+"To":"insert"+(r?"Before":"After")]=function(e){return y(e)[t](this),this}}),j.Z.prototype=y.fn,j.uniq=I,j.deserializeValue=g,y.zepto=j,y}(),start_ev,end_ev,move_ev;function getType(e){var t;return("object"==(t=typeof e)?null==e?"null":Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()}function Swipe(n,s){var t=function(){},r=function(e){setTimeout(e||t,0)},a={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))};if(n){var c,u,l,i,d=n.children[0];s=s||{};var f=parseInt(s.startSlide,10)||0,h=s.speed||300;s.continuous=void 0===s.continuous||s.continuous;var e,p,g=s.auto||0,m={},v={},y={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":r(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":r(this.transitionEnd(e));break;case"resize":r(o)}s.stopPropagation&&e.stopPropagation()},start:function(e){var t=e.touches[0];m={x:t.pageX,y:t.pageY,time:+new Date},p=void 0,v={},d.addEventListener("touchmove",this,!1),d.addEventListener("touchend",this,!1)},move:function(e){if(!(1<e.touches.length||e.scale&&1!==e.scale)){s.disableScroll&&e.preventDefault();var t=e.touches[0];v={x:t.pageX-m.x,y:t.pageY-m.y},void 0===p&&(p=!!(p||Math.abs(v.x)<Math.abs(v.y))),p||(e.preventDefault(),b(),s.continuous?(S(_(f-1),v.x+u[_(f-1)],0),S(f,v.x+u[f],0),S(_(f+1),v.x+u[_(f+1)],0)):(v.x=v.x/(!f&&0<v.x||f==c.length-1&&v.x<0?Math.abs(v.x)/l+1:1),S(f-1,v.x+u[f-1],0),S(f,v.x+u[f],0),S(f+1,v.x+u[f+1],0)))}},end:function(e){var t=+new Date-m.time,n=Number(t)<250&&20<Math.abs(v.x)||Math.abs(v.x)>l/2,i=!f&&0<v.x||f==c.length-1&&v.x<0;s.continuous&&(i=!1);var o=v.x<0;p||(n&&!i?(o?(s.continuous?(T(_(f-1),-l,0),T(_(f+2),l,0)):T(f-1,-l,0),T(f,u[f]-l,h),T(_(f+1),u[_(f+1)]-l,h),f=_(f+1)):(s.continuous?(T(_(f+1),l,0),T(_(f-2),-l,0)):T(f+1,l,0),T(f,u[f]+l,h),T(_(f-1),u[_(f-1)]+l,h),f=_(f-1)),s.callback&&s.callback(f,c[f])):s.continuous?(T(_(f-1),-l,h),T(f,0,h),T(_(f+1),l,h)):(T(f-1,-l,h),T(f,0,h),T(f+1,l,h))),d.removeEventListener("touchmove",y,!1),d.removeEventListener("touchend",y,!1)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)==f&&(g&&E(),s.transitionEnd&&s.transitionEnd.call(e,f,c[f]))}};return o(),g&&E(),a.addEventListener?(a.touch&&d.addEventListener("touchstart",y,!1),a.transitions&&(d.addEventListener("webkitTransitionEnd",y,!1),d.addEventListener("msTransitionEnd",y,!1),d.addEventListener("oTransitionEnd",y,!1),d.addEventListener("otransitionend",y,!1),d.addEventListener("transitionend",y,!1)),window.addEventListener("resize",y,!1)):window.onresize=function(){o()},{setup:function(){o()},slide:function(e,t){b(),I(e,t)},prev:function(){b(),s.continuous?I(f-1):f&&I(f-1)},next:function(){b(),w()},stop:function(){b()},getPos:function(){return f},getNumSlides:function(){return i},kill:function(){b(),d.style.width="",d.style.left="";for(var e=c.length;e--;){var t=c[e];t.style.width="",t.style.left="",a.transitions&&S(e,0,0)}a.addEventListener?(d.removeEventListener("touchstart",y,!1),d.removeEventListener("webkitTransitionEnd",y,!1),d.removeEventListener("msTransitionEnd",y,!1),d.removeEventListener("oTransitionEnd",y,!1),d.removeEventListener("otransitionend",y,!1),d.removeEventListener("transitionend",y,!1),window.removeEventListener("resize",y,!1)):window.onresize=null}}}function o(){c=d.children,i=c.length,c.length<2&&(s.continuous=!1),a.transitions&&s.continuous&&c.length<3&&(d.appendChild(c[0].cloneNode(!0)),d.appendChild(d.children[1].cloneNode(!0)),c=d.children),u=new Array(c.length),l=n.getBoundingClientRect().width||n.offsetWidth,d.style.width=c.length*l+"px";for(var e=c.length;e--;){var t=c[e];t.style.width=l+"px",t.setAttribute("data-index",e),a.transitions&&(t.style.left=e*-l+"px",T(e,e<f?-l:f<e?l:0,0))}s.continuous&&a.transitions&&(T(_(f-1),-l,0),T(_(f+1),l,0)),a.transitions||(d.style.left=f*-l+"px"),n.style.visibility="visible"}function w(){s.continuous?I(f+1):f<c.length-1&&I(f+1)}function _(e){return(c.length+e%c.length)%c.length}function I(e,t){if(f!=e){if(a.transitions){var n=Math.abs(f-e)/(f-e);if(s.continuous){var i=n;(n=-u[_(e)]/l)!==i&&(e=-n*c.length+e)}for(var o=Math.abs(f-e)-1;o--;)T(_((f<e?e:f)-o-1),l*n,0);e=_(e),T(f,l*n,t||h),T(e,0,t||h),s.continuous&&T(_(e-n),-l*n,0)}else e=_(e),function(t,n,i){if(!i)return d.style.left=n+"px";var o=+new Date,r=setInterval(function(){var e=+new Date-o;if(i<e)return d.style.left=n+"px",g&&E(),s.transitionEnd&&s.transitionEnd.call(event,f,c[f]),void clearInterval(r);d.style.left=(n-t)*(Math.floor(e/i*100)/100)+t+"px"},4)}(f*-l,e*-l,t||h);f=e,r(s.callback&&s.callback(f,c[f]))}}function T(e,t,n){S(e,t,n),u[e]=t}function S(e,t,n){var i=c[e],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=n+"ms",o.webkitTransform="translate("+t+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+t+"px)")}function E(){e=setTimeout(w,g)}function b(){g=0,clearTimeout(e)}}window.Zepto=Zepto,Window.prototype._setInterval=function(code,delay,arguments){function _setTimeout(){setTimeout(_setTimeout,delay,arguments),"function"==typeof code?code():"string"==typeof code&&eval(code)}_setTimeout()},Window.prototype.addH5Event=function(e,t,n){if(!window[e])return!1;clearInterval(Global[e+"Timer"]),Global[e+"Timer"]=setInterval(function(){t&&t()},n||50)},window.onload=function(){window.addH5Event("onh5back",function(){T.Storage.get("GlobalH5Back")&&(T.Storage.remove("GlobalH5Back",1),clearInterval(Global.h5backTimer),window.onh5back&&window.onh5back())})},void 0===window.$&&(window.$=Zepto),function(l){function d(e){return e._zid||(e._zid=t++)}function s(e,t,n,i){if((t=f(t)).ns)var o=RegExp("(?:^| )"+t.ns.replace(" "," .* ?")+"(?: |$)");return(_[d(e)]||[]).filter(function(e){return!(!e||t.e&&e.e!=t.e||t.ns&&!o.test(e.ns)||n&&d(e.fn)!==d(n)||i&&e.sel!=i)})}function f(e){return{e:(e=(""+e).split("."))[0],ns:e.slice(1).sort().join(" ")}}function u(o,e,t,r,s,a,c){var n=d(o),u=_[n]||(_[n]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return l(document).ready(t);var n=f(e);n.fn=t,n.sel=s,n.e in S&&(t=function(e){var t=e.relatedTarget;return!t||t!==this&&!l.contains(this,t)?n.fn.apply(this,arguments):void 0});var i=(n.del=a)||t;n.proxy=function(e){if(!(e=p(e)).isImmediatePropagationStopped()){e.data=r;var t=i.apply(o,e._args==m?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},n.i=u.length,u.push(n),"addEventListener"in o&&o.addEventListener(S[n.e]||I&&T[n.e]||n.e,n.proxy,n.del&&!I&&n.e in T||!!c)})}function h(t,e,n,i,o){var r=d(t);(e||"").split(/\s/).forEach(function(e){s(t,e,n,i).forEach(function(e){delete _[r][e.i],"removeEventListener"in t&&t.removeEventListener(S[e.e]||I&&T[e.e]||e.e,e.proxy,e.del&&!I&&e.e in T||!!o)})})}function p(i,o){return(o||!i.isDefaultPrevented)&&(o||(o=i),l.each(e,function(e,t){var n=o[e];i[e]=function(){return this[t]=a,n&&n.apply(o,arguments)},i[t]=E}),(o.defaultPrevented!==m?o.defaultPrevented:"returnValue"in o?!1===o.returnValue:o.getPreventDefault&&o.getPreventDefault())&&(i.isDefaultPrevented=a)),i}function g(e){var t,n={originalEvent:e};for(t in e)i.test(t)||e[t]===m||(n[t]=e[t]);return p(n,e)}var m,t=1,v=Array.prototype.slice,y=l.isFunction,w=function(e){return"string"==typeof e},_={},r={},I="onfocusin"in window,T={focus:"focusin",blur:"focusout"},S={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",l.event={add:u,remove:h},l.proxy=function(e,t){if(y(e)){var n=function(){return e.apply(t,arguments)};return n._zid=d(e),n}if(w(t))return l.proxy(e[t],e);throw new TypeError("expected function")},l.fn.bind=function(e,t,n){return this.on(e,t,n)},l.fn.unbind=function(e,t){return this.off(e,t)},l.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var a=function(){return!0},E=function(){return!1},i=/^([A-Z]|returnValue$|layer[XY]$)/,e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};l.fn.delegate=function(e,t,n){return this.on(t,e,n)},l.fn.undelegate=function(e,t,n){return this.off(t,e,n)},l.fn.live=function(e,t){return l(document.body).delegate(this.selector,e,t),this},l.fn.die=function(e,t){return l(document.body).undelegate(this.selector,e,t),this},l.fn.on=function(t,o,n,r,s){var a,c,i=this;return t&&!w(t)?(l.each(t,function(e,t){i.on(e,o,n,t,s)}),i):(w(o)||y(r)||!1===r||(r=n,n=o,o=m),(y(n)||!1===n)&&(r=n,n=m),!1===r&&(r=E),i.each(function(e,i){s&&(a=function(e){return h(i,e.type,r),r.apply(this,arguments)}),o&&(c=function(e){var t,n=l(e.target).closest(o,i).get(0);return n&&n!==i?(t=l.extend(g(e),{currentTarget:n,liveFired:i}),(a||r).apply(n,[t].concat(v.call(arguments,1)))):void 0}),u(i,t,r,n,o,c||a)}))},l.fn.off=function(e,n,t){var i=this;return e&&!w(e)?(l.each(e,function(e,t){i.off(e,n,t)}),i):(w(n)||y(t)||!1===t||(t=n,n=m),!1===t&&(t=E),i.each(function(){h(this,e,t,n)}))},l.fn.trigger=function(e,t){return(e=w(e)||l.isPlainObject(e)?l.Event(e):p(e))._args=t,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):l(this).triggerHandler(e,t)})},l.fn.triggerHandler=function(n,i){var o,r;return this.each(function(e,t){(o=g(w(n)?l.Event(n):n))._args=i,o.target=t,l.each(s(t,n.type||n),function(e,t){return r=t.proxy(o),!o.isImmediatePropagationStopped()&&void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){l.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){l.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),l.Event=function(e,t){w(e)||(e=(t=e).type);var n=document.createEvent(r[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),p(n)}}(Zepto),function(f){function h(e,t,n,i){return e.global?(e=t||d,n=f.Event(n),f(e).trigger(n,i),i=!n.isDefaultPrevented()):i=void 0,i}function p(e,t){var n=t.context;return!1!==t.beforeSend.call(n,e,t)&&!1!==h(t,n,"ajaxBeforeSend",[e,t])&&void h(t,n,"ajaxSend",[e,t])}function g(e,t,n,i){var o=n.context;n.success.call(o,e,"success",t),i&&i.resolveWith(o,[e,"success",t]),h(n,o,"ajaxSuccess",[t,n,e]),s("success",t,n)}function m(e,t,n,i,o){var r=i.context;i.error.call(r,n,t,e),o&&o.rejectWith(r,[n,t,e]),h(i,r,"ajaxError",[n,i,e||t]),s(t,n,i)}function s(e,t,n){var i=n.context;n.complete.call(i,t,e),h(n,i,"ajaxComplete",[t,n]),n.global&&!--f.active&&h(n,null,"ajaxStop")}function v(){}function y(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function a(e,t,n,i){return f.isFunction(t)&&(i=n,n=t,t=void 0),f.isFunction(n)||(i=n,n=void 0),{url:e,data:t,success:n,dataType:i}}var w,_,l=0,d=window.document,c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,I=/^(?:text|application)\/javascript/i,T=/^(?:text|application)\/xml/i,S="application/json",E="text/html",b=/^\s*$/;f.active=0,f.ajaxJSONP=function(n,i){if(!("type"in n))return f.ajax(n);var o,r,e=n.jsonpCallback,s=(f.isFunction(e)?e():e)||"jsonp"+ ++l,a=d.createElement("script"),c=window[s],t=function(e){f(a).triggerHandler("error",e||"abort")},u={abort:t};return i&&i.promise(u),f(a).on("load error",function(e,t){clearTimeout(r),f(a).off().remove(),"error"!=e.type&&o?g(o[0],u,n,i):m(null,t||"error",u,n,i),window[s]=c,o&&f.isFunction(c)&&c(o[0]),c=o=void 0}),!1===p(u,n)?t("abort"):(window[s]=function(){o=arguments},a.src=n.url.replace(/\?(.+)=\?/,"?$1="+s),d.head.appendChild(a),0<n.timeout&&(r=setTimeout(function(){t("timeout")},n.timeout))),u},f.ajaxSettings={type:"GET",beforeSend:v,success:v,error:v,complete:v,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},f.ajax=function(e){var t,n,i=f.extend({},e||{}),o=f.Deferred&&f.Deferred();for(w in f.ajaxSettings)void 0===i[w]&&(i[w]=f.ajaxSettings[w]);(t=i).global&&0==f.active++&&h(t,null,"ajaxStart"),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),(n=i).processData&&n.data&&"string"!=f.type(n.data)&&(n.data=f.param(n.data,n.traditional)),!n.data||n.type&&"GET"!=n.type.toUpperCase()||(n.url=y(n.url,n.data),n.data=void 0),!1===i.cache&&(i.url=y(i.url,"_="+Date.now()));var r=i.dataType;e=/\?.+=\?/.test(i.url);if("jsonp"==r||e)return e||(i.url=y(i.url,i.jsonp?i.jsonp+"=?":!1===i.jsonp?"":"callback=?")),f.ajaxJSONP(i,o);e=i.accepts[r];var s,a={},c=function(e,t){a[e.toLowerCase()]=[e,t]},u=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,l=i.xhr(),d=l.setRequestHeader;if(o&&o.promise(l),i.crossDomain||c("X-Requested-With","XMLHttpRequest"),c("Accept",e||"*/*"),(e=i.mimeType||e)&&(-1<e.indexOf(",")&&(e=e.split(",",2)[0]),l.overrideMimeType&&l.overrideMimeType(e)),(i.contentType||!1!==i.contentType&&i.data&&"GET"!=i.type.toUpperCase())&&c("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(_ in i.headers)c(_,i.headers[_]);if(l.setRequestHeader=c,!(l.onreadystatechange=function(){if(4==l.readyState){l.onreadystatechange=v,clearTimeout(s);var e,t=!1;if(200<=l.status&&l.status<300||304==l.status||0==l.status&&"file:"==u){r=r||((n=i.mimeType||l.getResponseHeader("content-type"))&&(n=n.split(";",2)[0]),n&&(n==E?"html":n==S?"json":I.test(n)?"script":T.test(n)&&"xml")||"text"),e=l.responseText;try{"script"==r?(0,eval)(e):"xml"==r?e=l.responseXML:"json"==r&&(e=b.test(e)?null:f.parseJSON(e))}catch(e){t=e}t?m(t,"parsererror",l,i,o):g(e,l,i,o)}else m(l.statusText||null,l.status?"error":"abort",l,i,o)}var n})===p(l,i))return l.abort(),m(null,"abort",l,i,o),l;if(i.xhrFields)for(_ in i.xhrFields)l[_]=i.xhrFields[_];for(_ in l.open(i.type,i.url,!("async"in i)||i.async,i.username,i.password),a)d.apply(l,a[_]);return 0<i.timeout&&(s=setTimeout(function(){l.onreadystatechange=v,l.abort(),m(null,"timeout",l,i,o)},i.timeout)),l.send(i.data?i.data:null),l},f.get=function(){return f.ajax(a.apply(null,arguments))},f.post=function(){var e=a.apply(null,arguments);return e.type="POST",f.ajax(e)},f.getJSON=function(){var e=a.apply(null,arguments);return e.dataType="json",f.ajax(e)},f.fn.load=function(e,t,n){if(!this.length)return this;var i,o=this,r=e.split(/\s/),s=(e=a(e,t,n)).success;return 1<r.length&&(e.url=r[0],i=r[1]),e.success=function(e){o.html(i?f("<div>").html(e.replace(c,"")).find(i):e),s&&s.apply(o,arguments)},f.ajax(e),this};var i=encodeURIComponent;f.param=function(e,t){var n=[];return n.add=function(e,t){this.push(i(e)+"="+i(t))},function n(i,e,o,r){var s,a=f.isArray(e),c=f.isPlainObject(e);f.each(e,function(e,t){s=f.type(t),r&&(e=o?r:r+"["+(c||"object"==s||"array"==s?e:"")+"]"),!r&&a?i.add(t.name,t.value):"array"==s||!o&&"object"==s?n(i,t,o,e):i.add(e,t)})}(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(i){i.fn.serializeArray=function(){var t,n=[];return i([].slice.call(this.get(0).elements)).each(function(){var e=(t=i(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=e&&"reset"!=e&&"button"!=e&&("radio"!=e&&"checkbox"!=e||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},i.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},i.fn.submit=function(e){return e?this.bind("submit",e):this.length&&(e=i.Event("submit"),this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()),this}}(Zepto),function(n){"__proto__"in{}||n.extend(n.zepto,{Z:function(e,t){return e=e||[],n.extend(e,n.fn),e.selector=t||"",e.__Z=!0,e},isZ:function(e){return"array"===n.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(e){return null}}}}(Zepto),function(r){r.getScript=function(e,t,n){var i=document.createElement("script"),o=r(i);i.src=e,r("head").append(i),o.bind("load",t),o.bind("error",n)}}(Zepto),function(d,f){function h(e){return e.toLowerCase()}var n,p,g,m,v,y,w,_,i="",o=window.document.createElement("div"),I=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,T={};d.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(e,t){if(o.style[e+"TransitionProperty"]!==f)return i="-"+h(e)+"-",n=t,!1}),p=i+"transform",T[g=i+"transition-property"]=T[m=i+"transition-duration"]=T[v=i+"transition-timing-function"]=T[y=i+"animation-name"]=T[w=i+"animation-duration"]=T[_=i+"animation-timing-function"]="",d.fx={off:n===f&&o.style.transitionProperty===f,speeds:{_default:400,fast:200,slow:600},cssPrefix:i,transitionEnd:n?n+"TransitionEnd":h("TransitionEnd"),animationEnd:n?n+"AnimationEnd":h("AnimationEnd")},d.fn.animate=function(e,t,n,i){return d.isPlainObject(t)&&(n=t.easing,i=t.complete,t=t.duration),t&&(t=("number"==typeof t?t:d.fx.speeds[t]||d.fx.speeds._default)/1e3),this.anim(e,t,n,i)},d.fn.anim=function(e,t,n,i){var o,r,s,a={},c="",u=this,l=d.fx.transitionEnd;if(t===f&&(t=.4),d.fx.off&&(t=0),"string"==typeof e)a[y]=e,a[w]=t+"s",a[_]=n||"linear",l=d.fx.animationEnd;else{for(o in r=[],e)I.test(o)?c+=o+"("+e[o]+") ":(a[o]=e[o],r.push(h(o.replace(/([a-z])([A-Z])/,"$1-$2"))));c&&(a[p]=c,r.push(p)),0<t&&"object"==typeof e&&(a[g]=r.join(", "),a[m]=t+"s",a[v]=n||"linear")}return s=function(e){if(void 0!==e){if(e.target!==e.currentTarget)return;d(e.target).unbind(l,s)}d(this).css(T),i&&i.call(this)},0<t&&this.bind(l,s),this.size()&&this.get(0),this.css(a),t<=0&&setTimeout(function(){u.each(function(){s.call(this)})},0),this},o=null}(Zepto),"ontouchstart"in window?(start_ev="touchstart",end_ev="touchend",move_ev="touchmove"):(start_ev="mousedown",end_ev="mouseup",move_ev="mousemove"),$.fn.Touch=function(a,c){var e=move_ev,u=!1,l={};"function"==getType(a)&&(a.fun=a),this.each(function(){var r=$($(this).eq(0)),s=!1,t=0;r.on(e,function(e){s=!0,clearTimeout(t),t=setTimeout(function(){s=!1,$(".tapped").removeClass("tapped")},250)}),a.children?(r.on(start_ev,a.children,function(e){u&&(clearTimeout(T.isTouchEndTimer),T.isTouchEndTimer=setTimeout(function(){u=!1},799)),c&&c.prevent&&e.preventDefault(),c&&c.stop&&e.stopPropagation(),$(this).addClass("tapped");var t=this,n=$(this);c&&c.isLongPress&&(clearTimeout(T.longPressTimer),T.longPressTimer=setTimeout(function(){if(!u)return n.removeClass("tapped"),setTimeout(function(){a.fun.call(t,t)},0),c&&c.nopreventDefault||e.preventDefault(),0},800)),l.beginTime=(new Date).getTime();try{l.x=e.changedTouches[0].clientX,l.y=e.changedTouches[0].clientY}catch(e){}}),r[c&&c.eventType?c.eventType:"on"](end_ev,a.children,function(e){if(u=!0,c&&c.isLongPress)return!1;l.endTime=(new Date).getTime();try{var t=Math.abs(l.x-e.changedTouches[0].clientX),n=Math.abs(l.y-e.changedTouches[0].clientY);s=!(n<16&&t<16)}catch(e){}var i=!1;if(l.beginTime&&l.endTime&&(i=800<l.endTime-l.beginTime),s&&"touchend"==end_ev||i)return s=!1,$(this).removeClass("tapped"),c&&c.nopreventDefault||e.preventDefault(),0;$(this).removeClass("tapped");var o=this;setTimeout(function(){a.fun.call(o,o)},0),c&&c.noStopPropagation||e.stopPropagation()})):(r.on(start_ev,function(e){u&&(clearTimeout(T.isTouchEndTimer),T.isTouchEndTimer=setTimeout(function(){u=!1},799)),c&&c.prevent&&e.preventDefault(),c&&c.stop&&e.stopPropagation(),$(this).addClass("tapped");var t=this,n=$(this);c&&c.isLongPress&&(clearTimeout(T.longPressTimer),T.longPressTimer=setTimeout(function(){if(!u)return n.removeClass("tapped"),setTimeout(function(){a.fun.call(t,t)},0),c&&c.nopreventDefault||e.preventDefault(),0},800)),l.beginTime=(new Date).getTime();try{l.x=e.changedTouches[0].clientX,l.y=e.changedTouches[0].clientY}catch(e){}}),r[c&&c.eventType?c.eventType:"on"](end_ev,function(e){if(u=!0,c&&c.isLongPress)return!1;l.endTime=(new Date).getTime();try{var t=Math.abs(l.x-e.changedTouches[0].clientX),n=Math.abs(l.y-e.changedTouches[0].clientY);s=!(n<16&&t<16)}catch(e){}var i=!1;if(l.beginTime&&l.endTime&&(i=800<l.endTime-l.beginTime),s&&"touchend"==end_ev||i)return s=!1,$(this).removeClass("tapped"),c&&c.nopreventDefault||e.preventDefault(),0;if(c&&c.noRepeat){if(r.is("bt_disable")||r.t&&(new Date).getTime()-r.t<1e3)return;r.t=(new Date).getTime()}$(this).removeClass("tapped");var o=this;setTimeout(function(){a.fun.apply(o,[o,e])},0),c&&c.nopreventDefault||e.preventDefault()}))})},function(h,p){var n,g,m,v,y,w,_,I,T,S,i="",o=document.createElement("div"),E=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,b={};function e(e){return n?n+e:e.toLowerCase()}o.style.transform===p&&h.each({Webkit:"webkit",Moz:"",O:"o"},function(e,t){if(o.style[e+"TransitionProperty"]!==p)return i="-"+e.toLowerCase()+"-",n=t,!1}),g=i+"transform",b[m=i+"transition-property"]=b[v=i+"transition-duration"]=b[w=i+"transition-delay"]=b[y=i+"transition-timing-function"]=b[_=i+"animation-name"]=b[I=i+"animation-duration"]=b[S=i+"animation-delay"]=b[T=i+"animation-timing-function"]="",h.fx={off:n===p&&o.style.transitionProperty===p,speeds:{_default:400,fast:200,slow:600},cssPrefix:i,transitionEnd:e("TransitionEnd"),animationEnd:e("AnimationEnd")},h.fn.animate=function(e,t,n,i,o){return h.isFunction(t)&&(i=t,t=n=p),h.isFunction(n)&&(i=n,n=p),h.isPlainObject(t)&&(n=t.easing,i=t.complete,o=t.delay,t=t.duration),t&&(t=("number"==typeof t?t:h.fx.speeds[t]||h.fx.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(e,t,n,i,o)},h.fn.anim=function(e,t,n,i,o){var r,s,a,c={},u="",l=this,d=h.fx.transitionEnd,f=!1;if(t===p&&(t=h.fx.speeds._default/1e3),o===p&&(o=0),h.fx.off&&(t=0),"string"==typeof e)c[_]=e,c[I]=t+"s",c[S]=o+"s",c[T]=n||"linear",d=h.fx.animationEnd;else{for(r in s=[],e)E.test(r)?u+=r+"("+e[r]+") ":(c[r]=e[r],s.push(r.replace(/([A-Z])/g,"-$1").toLowerCase()));u&&(c[g]=u,s.push(g)),0<t&&"object"==typeof e&&(c[m]=s.join(", "),c[v]=t+"s",c[w]=o+"s",c[y]=n||"linear")}return a=function(e){if(void 0!==e){if(e.target!==e.currentTarget)return;h(e.target).unbind(d,a)}else h(this).unbind(d,a);f=!0,h(this).css(b),i&&i.call(this)},0<t&&(this.bind(d,a),setTimeout(function(){f||a.call(l)},1e3*(t+o)+25)),this.size()&&this.get(0).clientLeft,this.css(c),t<=0&&setTimeout(function(){l.each(function(){a.call(this)})},0),this},o=null}(Zepto),function(o){"use strict";var n=window,r=document,s=!1,a=o(n),c=o(r),u=parseFloat(o("html").css("font-size"));o.fn.dropload=function(e){return new t(this,e)};var t=function(e,t){var n=this;n.$element=e,n.upInsertDOM=!1,n.loading=!1,n.isLockUp=!1,n.isLockDown=!1,n.isData=!0,n._scrollTop=0,n._threshold=0,n.init(t)};function l(e){e.touches||(e.touches=e.originalEvent.touches)}var d=!(t.prototype.init=function(e){var t,i=this;i.opts=o.extend(!0,{},{scrollArea:i.$element,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-load"><span class="loading"></span></div>',domUpdate:'<div class="dropload-load"><span class="loading"></span></div>',domLoad:'<div class="dropload-load"><span class="loading"></span></div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">上拉加载更多</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>Refreshing</div>',domNoData:'<div class="dropload-noData">暂无数据</div>'},autoLoad:!0,distance:50,threshold:"",loadUpFn:"",loadDownFn:""},e),""!=i.opts.loadDownFn&&(i.$element.append('<div class="'+i.opts.domDown.domClass+'">'+i.opts.domDown.domRefresh+"</div>"),i.$domDown=o("."+i.opts.domDown.domClass)),i.$domDown&&""===i.opts.threshold?i._threshold=Math.floor(1*i.$domDown.height()/3):i._threshold=i.opts.threshold,i.opts.scrollArea==n?(i.$scrollArea=a,i._scrollContentHeight=c.height(),i._scrollWindowHeight=r.documentElement.clientHeight):(i.$scrollArea=i.opts.scrollArea,i._scrollContentHeight=i.$element[0].scrollHeight,i._scrollWindowHeight=i.$element.height()),""!=i.opts.loadDownFn&&(t=i).opts.autoLoad&&t._scrollContentHeight-t._threshold<=t._scrollWindowHeight&&f(t),a.on("resize",function(){i.opts.scrollArea==n?i._scrollWindowHeight=n.innerHeight:i._scrollWindowHeight=i.$element.height()}),i.$element.on("touchstart",function(e){var t,n;0<o(window).scrollTop()?s=!0:(s=!1,i.loading||(l(e),t=e,(n=i)._startY=t.touches[0].pageY,n.touchScrollTop=n.$scrollArea.scrollTop()))}),i.$element.on("touchmove",function(e){s||i.loading||(l(e),function(e,t){t._curY=e.touches[0].pageY,t._moveY=t._curY-t._startY,0<t._moveY?t.direction="down":t._moveY<0&&(t.direction="up");var n=Math.abs(t._moveY);""!=t.opts.loadUpFn&&t.touchScrollTop<=0&&"down"==t.direction&&!t.isLockUp&&(e.preventDefault(),"match-list"==t.$element.attr("id")||"myFollowContent"==t.$element.attr("id")?t.upInsertDOM||(o("#main").prepend('<div class="'+t.opts.domUp.domClass+'"></div>'),t.upInsertDOM=!0):t.upInsertDOM||(t.upInsertDOM=!0,t.$element.prepend('<div class="'+t.opts.domUp.domClass+'"></div>')),t.$domUp=o("."+t.opts.domUp.domClass),h(t.$domUp,0),n<=t.opts.distance?(t._offsetY=n,t.$domUp.html(t.opts.domUp.domRefresh)):n>t.opts.distance&&n<=2*t.opts.distance?(t._offsetY=t.opts.distance+.5*(n-t.opts.distance),t.$domUp.html(t.opts.domUp.domUpdate)):t._offsetY=t.opts.distance+.5*t.opts.distance+.2*(n-2*t.opts.distance),t._offsetY>=98/75*u&&t.$domUp.css({opacity:t._offsetY/1.5/(98/75*u)}),t.$domUp.css({height:t._offsetY}),console.log("---------me._curY"+t._curY+"头加内容:"+(1*o("#goodscontent").height()+1*o(".navbar").height())),!d&&0<o("#goodscontent").length&&0<o(".navbar").length&&t._curY>1*o("#goodscontent").height()+1*o(".navbar").height()&&(d=!0,setTimeout(function(){h(t.$domUp,300),n>t.opts.distance?(t.$domUp.css({height:t.$domUp.children().height()}),t.$domUp.html(t.opts.domUp.domLoad),t.loading=!0,t.opts.loadUpFn(t)):0<t.$domUp.length&&t.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){t.upInsertDOM=!1,o(this).remove()}),t._moveY=0,t.$domUp.css({height:"1.17rem"}),d=!1},800)))}(e,i))}),i.$element.on("touchend",function(){var e,t;s||(i.loading||(e=i,t=Math.abs(e._moveY),""!=e.opts.loadUpFn&&e.touchScrollTop<=0&&"down"==e.direction&&!e.isLockUp&&(h(e.$domUp,300),t>e.opts.distance?(e.$domUp.css({height:e.$domUp.children().height()}),e.$domUp.html(e.opts.domUp.domLoad),e.loading=!0,e.opts.loadUpFn(e)):0<e.$domUp.length&&e.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){e.upInsertDOM=!1,o(this).remove()}),e._moveY=0,e.$domUp.css({height:"1.17rem"}))))}),""!=i.opts.loadDownFn&&i.$scrollArea.on("scroll",function(){i._scrollTop=i.$scrollArea.scrollTop(),""!=i.opts.loadDownFn&&!i.loading&&!i.isLockDown&&i._scrollContentHeight-i._threshold<=i._scrollWindowHeight+i._scrollTop&&f(i)})});function f(e){e.direction="up",e.$domDown.html(e.opts.domDown.domLoad),e.loading=!0,e.opts.loadDownFn(e)}function h(e,t){e.css({"-webkit-transition":"all "+t+"ms",transition:"all "+t+"ms"})}t.prototype.lock=function(e){var t=this;void 0===e?"up"==t.direction?t.isLockDown=!0:"down"==t.direction?t.isLockUp=!0:(t.isLockUp=!0,t.isLockDown=!0):"up"==e?t.isLockUp=!0:"down"==e&&(t.isLockDown=!0,t.direction="up")},t.prototype.unlock=function(){this.isLockUp=!1,this.isLockDown=!1,this.direction="up"},t.prototype.noData=function(e){void 0===e||1==e?this.isData=!1:0==e&&(this.isData=!0)},t.prototype.resetload=function(){var t=this;"down"==t.direction&&t.upInsertDOM&&0<t.$domUp.length?t.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){var e;t.loading=!1,t.upInsertDOM=!1,o(this).remove(),(e=t).opts.scrollArea==n?e._scrollContentHeight=c.height():e._scrollContentHeight=e.$element[0].scrollHeight}):"up"==t.direction&&t.$domDown&&0<t.$domDown.length&&t.$domDown.css({height:"0"}).remove()}}(window.Zepto||window.jQuery),function(e,c){var o=e.document,t=e.navigator.userAgent,u=/iPhone|iPad|iPod/i.test(t),l=/Android/i.test(t),n=t.match(/(?:IOS|Android)[\/\s](\d+[._]\d+(?:[._]\d+)?)/i),i=t.match(/QAPP[\/\s](\d+[._]\d+[._]\d+)/),r=Object.prototype.hasOwnProperty,s=c.nativeApi=e.NativeApi||(e.NativeApi={}),a=[],d="iframe_",f="param_",h="chunk_";function p(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var i=parseInt(e[n],10),o=parseInt(t[n],10);if(window.isNaN(i)&&(i=0),window.isNaN(o)&&(o=0),i<o)return-1;if(o<i)return 1}return 0}n=n?(n[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var g={isAvailable:1===p(i=i?(i[1]||"0.0.0").replace(/\_/g,"."):"0.0.0","0"),compareVersion:function(e){return 1===p(i,e)},call:function(e,t,n,i,o,r){var s,a;if("number"==typeof arguments[arguments.length-1]&&(r=arguments[arguments.length-1]),"function"!=typeof i&&(i=null),"function"!=typeof o&&(o=null),c.promise&&(a=c.promise.defer()),s=0<r?setTimeout(function(){g.onFailure(s,{ret:"TIMEOUT"})},r):m.getSid(),m.registerCall(s,i,o,a),m.registerGC(s,r),m.callMethod(e,t,n,s),a)return a.promise},fireEvent:function(e,t,n){var i=o.createEvent("HTMLEvents");i.initEvent(e,!1,!0),i.result=m.parseData(t||m.getData(n)),o.dispatchEvent(i)},getParam:function(e){return m.getParam(e)},setData:function(e,t){m.setData(e,t)},onSuccess:function(e,t){console.log("onSuccess---sid:"+e+" data:"+t),m.onComplete(e,t,"success")},onFailure:function(e,t){console.log("onFailure---sid:"+e+" data:"+t),m.onComplete(e,t,"failure")}},m={params:{},chunks:{},calls:{},getSid:function(){return parseInt(65535*Math.random(),10)+1},buildParam:function(e){return e&&"object"==typeof e?JSON.stringify(e):e||""},getParam:function(e){return this.params[f+e]||""},setParam:function(e,t){this.params[f+e]=t},parseData:function(e){var t;if(console.log("parseData---"+e),e&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){console.log("parseData error---"+e),t={ret:["WV_ERR::PARAM_PARSE_ERROR"]}}else t=e||{};return t},setData:function(){this.chunks[h+sid]=this.chunks[h+sid]||[],this.chunks[h+sid].push(chunk)},getData:function(e){return this.chunks[h+e]?this.chunks[h+e].join(""):""},registerCall:function(e,t,n,i){t&&(this.calls["suc_"+e]=t),n&&(this.calls["err_"+e]=n),i&&(this.calls["defer_"+e]=i)},unregisterCall:function(e){var t="suc_"+e,n="err_"+e,i="defer_"+e,o={};return this.calls[t]&&(o.success=this.calls[t],delete this.calls[t]),this.calls[n]&&(o.failure=this.calls[n],delete this.calls[n]),this.calls[i]&&(o.defer=this.calls[i],delete this.calls[i]),o},useIframe:function(e,t){var n=d+e,i=a.pop();i||((i=o.createElement("iframe")).setAttribute("frameborder","0"),i.style.cssText="width:0;height:0;border:0;display:none;"),i.setAttribute("id",n),i.setAttribute("src",t),i.parentNode||setTimeout(function(){o.body.appendChild(i)},5)},retrieveIframe:function(e){var t=d+e,n=o.querySelector("#"+t);3<=a.length?o.body.removeChild(n):a.push(n)},callMethod:function(e,t,n,i){n=m.buildParam(n),console.log("call---obj:"+e+" method:"+t+" sid:"+i+" params:"+n);var o="hybrid://"+e+":"+i+"/"+t+"?"+n;if(u)this.setParam(i,n),this.useIframe(i,o);else if(l){window.prompt(o,"wv_hybrid:")}},registerGC:function(e,t){var n=this,i=Math.max(t||0,6e5),o=Math.max(t||0,6e4),r=Math.max(t||0,6e5);setTimeout(function(){n.unregisterCall(e)},i),u?setTimeout(function(){n.params[f+e]&&delete n.params[f+e]},o):l&&setTimeout(function(){n.chunks[h+e]&&delete n.chunks[h+e]},r)},onComplete:function(e,t,n){console.log("onComplete---sid:"+e+" data:"+t+" type:"+n),clearTimeout(e);var i=this.unregisterCall(e),o=i.success,r=i.failure,s=i.defer;t=t||this.getData(e);var a=(t=this.parseData(t)).ret;"string"==typeof a&&((t=t.value||t).ret||(t.ret=[a])),"success"===n?(o&&o(t),s&&s.resolve(t)):"failure"===n&&(r&&r(t),s&&s.reject(t)),u?(this.retrieveIframe(e),this.params[f+e]&&delete this.params[f+e]):l&&this.chunks[h+e]&&delete this.chunks[h+e]}};for(var v in g)r.call(s,v)||(s[v]=g[v])}(window,window.lib||(window.lib={})),function(e,t){var n,i,o=e.navigator.userAgent;(n=o.match(/QAPP[\/\s]([\d\.\_]+)/))&&(i=n[1]);var a=t.nativeApi,r=document,s=(/iPhone|iPad|iPod/i.test(o),/Android/i.test(o),i&&i.split("."),["SUCCESS","NO_HANDLER","PARAM_ERR","FAILED","NO_PERMISSION","TIMEOUT","CANCEL"]),c="_Loading";function u(e){return"string"==typeof e}function l(e,t,n,i,o){var r=(e=e.split("."))[0],s=e[1];a&&a.call(r,s,t,n,i,o)}function d(t,n){return(t||n)&&function(e){e=n&&n(e)||e,t&&t(h(e))}}function f(t){return t&&function(e){t(function(e){var t=5,n=u(e)?e:e.code;if(e){var i=s.indexOf(n);t=0<i?i:t}return{errorCode:t,errorMessage:n,data:e}}(e))}}function h(e){return(e=e||{}).errorCode=0,e.errorMessage="",e}var p=e.API=t.API={aliPay:function(e,t){console.log("alipay---"+JSON.stringify(e)),l("IntentInterface.alipay",e,d(t),f(t))},weixinPay:function(e,t){console.log("weixinPay---"+JSON.stringify(e)),l("IntentInterface.weixinPay",e,d(t),f(t))},thirdShare:function(e,t){console.log("thirdShare---"+JSON.stringify(e)),l("IntentInterface.thirdShare",e,d(t),f(t))},thirdLogin:function(e,t){console.log("thirdLogin---"+JSON.stringify(e)),l("IntentInterface.thirdLogin",e,d(t),f(t))},thirdToken:function(e,t){console.log("thirdToken---"+JSON.stringify(e)),l("IntentInterface.thirdToken",e,d(t),f(t))},canShowBigAward:function(e,t){console.log("canShowBigAward---"+JSON.stringify(e)),l("IntentInterface.canShowBigAward",e,d(t),f(t))},notifyRenderFinish:function(e,t){console.log("notifyRenderingFinish---"+JSON.stringify(e)),l("IntentInterface.notifyRenderFinish",e,d(t),f(t))},clearCache:function(e,t){console.log("clearCache---"+JSON.stringify(e)),l("IntentInterface.clearCache",e,d(t),f(t))},goTabbar:function(e,t){console.log("goTabbar---"+JSON.stringify(e)),l("IntentInterface.goTabbar",e,d(t),f(t))},screenShot:function(e,t){console.log("screenShot---"+JSON.stringify(e)),l("IntentInterface.screenShot",e,d(t),f(t))},sendToken:function(e,t){console.log("sendToken---"+JSON.stringify(e)),l("IntentInterface.sendToken",e,d(t),f(t))},LocationInterface:function(e,t,n){console.log("LocationInterface---"+JSON.stringify(e)),l("IntentInterface.LocationInterface",e,d(t),f(n))},showNativeTip:function(e,t){console.log("showNativeTip---"+JSON.stringify(e)),l("IntentInterface.showNativeTip",e,d(t),f(t))},openLogin:function(e,t){console.log("openLogin---"+JSON.stringify(e)),l("IntentInterface.openLogin",e,d(t),f(t))},openBloggerPage:function(e,t){console.log("openBloggerPage---"+JSON.stringify(e)),l("IntentInterface.openBloggerPage",e,d(t),f(t))},openBuyDiamond:function(e,t){console.log("openBuyDiamond---"+JSON.stringify(e)),l("IntentInterface.openBuyDiamond",e,d(t),f(t))},openNoteDetail:function(e,t){console.log("openNoteDetail---"+JSON.stringify(e)),l("IntentInterface.openNoteDetail",e,d(t),f(t))},openInformationDetail:function(e,t){console.log("openInformationDetail---"+JSON.stringify(e)),l("IntentInterface.openInformationDetail",e,d(t),f(t))},openYetService:function(e,t){console.log("openYetService---"+JSON.stringify(e)),l("IntentInterface.openYetService",e,d(t),f(t))},openUserCenter:function(e,t){console.log("openUserCenter---"+JSON.stringify(e)),l("IntentInterface.openUserCenter",e,d(t),f(t))},openJiePan:function(e,t){e=u(e)?{url:e}:e,console.log("openJiePan---"+JSON.stringify(e)),l("IntentInterface.openJiePan",e,d(t),f(t))},openBindPhone:function(e,t){console.log("openBindPhone---"+JSON.stringify(e)),l("IntentInterface.openBindPhone",e,d(t),f(t))},openAddressSelect:function(e,t){console.log("openAddressSelect---"+JSON.stringify(e)),l("IntentInterface.openAddressSelect",e,d(t),f(t))},openBetDetail:function(e,t){console.log("openBetDetail---"+JSON.stringify(e)),l("IntentInterface.openBetDetail",e,d(t),f(t))},openBetRule:function(e,t){console.log("openBetRule---"+JSON.stringify(e)),l("IntentInterface.openBetRule",e,d(t),f(t))},openPlayGame:function(e,t){console.log("openPlayGame---"+JSON.stringify(e)),l("IntentInterface.openPlayGame",e,d(t),f(t))},openPayView:function(e,t){console.log("openPayView---"+JSON.stringify(e)),l("IntentInterface.openPayView",e,d(t),f(t))},sendBetMinSign:function(e,t){console.log("sendBetMinSign---"+JSON.stringify(e)),l("IntentInterface.sendBetMinSign",e,d(t),f(t))},openAnyView:function(e,t){console.log("openAnyView---"+JSON.stringify(e)),l("IntentInterface.openAnyView",e,d(t),f(t))},gotoJingCai:function(e,t){console.log("gotoJingCai---"+JSON.stringify(e)),l("IntentInterface.gotoJingCai",e,d(t),f(t))},getVerifyCode:function(e,t){l("webService.getVerifyCode",e=e||{},d(t),f(t))},callPay:function(e,t){l("webService.callPay",e=e||{},d(t),f(t))},showConfirm:function(e,t){console.log("showConfirm---"+JSON.stringify(e)),l("DialogInterface.showConfirm",e,d(t),f(t))},sendHttp:function(e,t){e=e||{},console.log("sendHttp---"+JSON.stringify(e)),l("HttpActionInteface.sendHttp",e,d(t),f(t))},getAppInfo:function(e,t){e=e||{},console.log("getAppInfo---"+JSON.stringify(e)),l("DeviceInfoInterface.getAppInfo",e,d(t),f(t))},eventListener:function(e,t){e=u(e)?{url:e}:e,console.log("regiest---"+JSON.stringify(e)),l("webService.eventListener",e,d(t),f(t))},openWindow:function(e,t){e=u(e)?{url:e}:e,console.log("openWindow---"+JSON.stringify(e)),l("webService.openWindow",e,d(t),f(t))},closeWindow:function(e,t){e=e||{},console.log("closeWindow---"+JSON.stringify(e)),l("webService.closeWindow",e,d(t),f(t))},setWebViewTitle:function(e,t){e=u(e)?{url:e}:e,console.log("setWebViewTitle---"+JSON.stringify(e)),l("webService.setWebViewTitle",e,d(t),f(t))},goGame:function(e,t){console.log("goGame---"+JSON.stringify(e)),l("IntentInterface.goGame",e,d(t),f(t))},openClubShare:function(e,t){console.log("openClubShare---"+JSON.stringify(e)),l("IntentInterface.openClubShare",e,d(t),f(t))},openRecommendIndex:function(e,t){console.log("openRecommendIndex---"+JSON.stringify(e)),l("IntentInterface.openRecommendIndex",e,d(t),f(t))},openApplySpecialist:function(e,t){console.log("openApplySpecialist---"+JSON.stringify(e)),l("IntentInterface.openApplySpecialist",e,d(t),f(t))},uploadImage:function(e,t){console.log("PhotoInterface---"+JSON.stringify(e)),l("PhotoInterface.uploadImage",e,d(t),f(t))},toast:function(e,t){var n=u(e)?e:e&&e.text;console.log("toast---"+n),l("DialogInterface.showToast",{msg:n},d(t),f(t))},showLoadding:function(e,t){console.log("showLoadding---"+JSON.stringify(e)),l("IntentInterface.showLoadding",e,d(t),f(t))},share:function(e,t){console.log("share---"+JSON.stringify(e)),l("IntentInterface.shareInfo",e,d(t),f(t))},openszrz:function(e,t){console.log("openszrz---"+JSON.stringify(e)),l("IntentInterface.openszrz",e,d(t),f(t))},geolocation:{getCurrentPosition:function(e,t){l("LocationInterface.getLocation",e=e||{},d(t),f(t))}},network:{getType:function(e){l("DeviceInfoInterface.getNetworkInfo","",d(e,function(e){var t=e.network||"",n={type:t,isWifi:!1,is2G:!1,is3G:!1,isOnline:!1};return/WIFI/i.test(t)?n.isWifi=n.isOnline=!0:/GPRS|EDGE|CDMA/i.test(t)?n.is2G=n.isOnline=!0:/UMTS|HSDPA|EVDO/i.test(t)&&(n.is3G=n.isOnline=!0),n.isE=n.isG=n.isH=!1,n.networkAvailable=null!=t&&""!=t,n}),f(e))}},photo:function(e,t){l("PhotoInterface.photo",e=e||{},d(t,function(e){e.photo=e.resourceUrl}),f(t))},showImage:function(e,t){l("PhotoInterface.showImage",e=e||{},d(t,function(e){e.photo=e.resourceUrl}),f(t))},mutiPhoto:function(e,t){l("PhotoInterface.mutiPhoto",e=e||{},d(t,function(e){e.photo=e.resourceUrl}),f(t))},contacts:{get:function(e,t){l("WVContacts.choose",null,d(t,function(e){var t=[{name:e.name,phoneNumber:e.phone,email:e.email}];return e.results=t,e}),f(t))}},showLoading:function(e,t){var n=r.getElementById(c);if(n)n.style.display="block";else{var i=r.createElement("div");i.id=c,i.style.cssText="position:absolute;width:100%;height:100%;left:0;top:0;background:url(http://a.tbcdn.cn/mw/base/styles/component/more/images/loading.gif) 50% 50% no-repeat;background-size:40px 16px;pointer-events:none;",(n=r.createDocumentFragment()).appendChild(i)}r.body.appendChild(n),t&&t(h(null))},hideLoading:function(e){var t=r.getElementById(c);t&&(t.style.display="none"),e&&e(h(null))}},g=navigator.geolocation||(navigator.geolocation={});g.getCurrentPosition||(g.getCurrentPosition=p.geolocation.getCurrentPosition)}(window,window.lib||(window.lib={})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.lozad=t()}(this,function(){"use strict";var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=document.documentMode,u={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var t=document.createElement("img");o&&e.getAttribute("data-iesrc")&&(t.src=e.getAttribute("data-iesrc")),e.appendChild(t)}if(e.getAttribute("data-src")){var n=$(e),i=n.attr("data-src");(t=new Image).src=i,t.onload=void n.attr("src",i)}e.getAttribute("data-srcset")&&(e.srcset=e.getAttribute("data-srcset")),e.getAttribute("data-background-image")&&(e.style.backgroundImage="url("+e.getAttribute("data-background-image")+")")}};function l(e){var t=$(e).attr("data-src"),n=new Image;n.src=t,n.onload=void e.setAttribute("data-loaded",!0)}var d=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=c({},u,e),o=t.rootMargin,r=t.threshold,s=t.load,a=void 0;return window.IntersectionObserver&&(a=new IntersectionObserver((n=s,function(e,t){e.forEach(function(e){0<e.intersectionRatio&&(t.unobserve(e.target),d(e.target)||(n(e.target),l(e.target)))})}),{rootMargin:o,threshold:r})),{observe:function(){for(var e,t=(e=i)instanceof Element?[e]:e instanceof NodeList?e:document.querySelectorAll(e),n=0;n<t.length;n++)d(t[n])||(a?a.observe(t[n]):(s(t[n]),l(t[n])))},triggerLoad:function(e){d(e)||(s(e),l(e))}}}}),(window.jQuery||window.Zepto)&&function(t){t.fn.Swipe=function(e){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],e))})}}(window.jQuery||window.Zepto),"undefined"==typeof Paho&&(Paho={}),Paho.MQTT=function(s){var g={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},d=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var i="Unknown property, "+n+". Valid properties are:";for(var n in t)t.hasOwnProperty(n)&&(i=i+" "+n);throw new Error(i)}if(typeof e[n]!==t[n])throw new Error(h(f.INVALID_TYPE,[typeof e[n],n]))}},n=function(e,t){return function(){return e.apply(t,arguments)}},f={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},l={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},h=function(e,t){var n=e.text;if(t)for(var i,o,r=0;r<t.length;r++)if(i="{"+r+"}",0<(o=n.indexOf(i))){var s=n.substring(0,o),a=n.substring(o+i.length);n=s+t[r]+a}return n},p=[0,6,77,81,73,115,100,112,3],m=[0,4,77,81,84,84,4],v=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function a(e,t){var n,i=t,o=e[t],r=o>>4,s=o&=15;t+=1;var a=0,c=1;do{if(t==e.length)return[null,i];a+=(127&(n=e[t++]))*c,c*=128}while(0!=(128&n));var u=t+a;if(u>e.length)return[null,i];var l=new v(r);switch(r){case g.CONNACK:1&e[t++]&&(l.sessionPresent=!0),l.returnCode=e[t++];break;case g.PUBLISH:var d=s>>1&3,f=_(e,t),h=T(e,t+=2,f);t+=f,0<d&&(l.messageIdentifier=_(e,t),t+=2);var p=new Paho.MQTT.Message(e.subarray(t,u));1==(1&s)&&(p.retained=!0),8==(8&s)&&(p.duplicate=!0),p.qos=d,p.destinationName=h,l.payloadMessage=p;break;case g.PUBACK:case g.PUBREC:case g.PUBREL:case g.PUBCOMP:case g.UNSUBACK:l.messageIdentifier=_(e,t);break;case g.SUBACK:l.messageIdentifier=_(e,t),t+=2,l.returnCode=e.subarray(t,u)}return[l,u]}function y(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function w(e,t,n,i){return c(e,n,i=y(t,n,i)),i+t}function _(e,t){return 256*e[t]+e[t+1]}function I(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);2047<i?(55296<=i&&i<=56319&&(n++,t++),t+=3):127<i?t+=2:t++}return t}function c(e,t,n){for(var i=n,o=0;o<e.length;o++){var r=e.charCodeAt(o);if(55296<=r&&r<=56319){var s=e.charCodeAt(++o);if(isNaN(s))throw new Error(h(f.MALFORMED_UNICODE,[r,s]));r=s-56320+(r-55296<<10)+65536}r<=127?t[i++]=r:(r<=2047?t[i++]=r>>6&31|192:(r<=65535?t[i++]=r>>12&15|224:(t[i++]=r>>18&7|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return t}function T(e,t,n){for(var i,o="",r=t;r<t+n;){var s=e[r++];if(s<128)i=s;else{var a=e[r++]-128;if(a<0)throw new Error(h(f.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)i=64*(s-192)+a;else{var c=e[r++]-128;if(c<0)throw new Error(h(f.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16)]));if(s<240)i=4096*(s-224)+64*a+c;else{var u=e[r++]-128;if(u<0)throw new Error(h(f.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));if(!(s<248))throw new Error(h(f.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));i=262144*(s-240)+4096*a+64*c+u}}}65535<i&&(i-=65536,o+=String.fromCharCode(55296+(i>>10)),i=56320+(1023&i)),o+=String.fromCharCode(i)}return o}v.prototype.encode=function(){var e=(15&this.type)<<4,t=0,n=new Array,i=0;switch(null!=this.messageIdentifier&&(t+=2),this.type){case g.CONNECT:switch(this.mqttVersion){case 3:t+=p.length+3;break;case 4:t+=m.length+3}if(t+=I(this.clientId)+2,null!=this.willMessage){t+=I(this.willMessage.destinationName)+2;var o=this.willMessage.payloadBytes;o instanceof Uint8Array||(o=new Uint8Array(s)),t+=o.byteLength+2}null!=this.userName&&(t+=I(this.userName)+2),null!=this.password&&(t+=I(this.password)+2);break;case g.SUBSCRIBE:e|=2;for(var r=0;r<this.topics.length;r++)n[r]=I(this.topics[r]),t+=n[r]+2;t+=this.requestedQos.length;break;case g.UNSUBSCRIBE:e|=2;for(r=0;r<this.topics.length;r++)n[r]=I(this.topics[r]),t+=n[r]+2;break;case g.PUBREL:e|=2;break;case g.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),t+=(i=I(this.payloadMessage.destinationName))+2;var s=this.payloadMessage.payloadBytes;t+=s.byteLength,s instanceof ArrayBuffer?s=new Uint8Array(s):s instanceof Uint8Array||(s=new Uint8Array(s.buffer));break;case g.DISCONNECT:}var a=function(e){var t=new Array(1),n=0;do{var i=e%128;0<(e>>=7)&&(i|=128),t[n++]=i}while(0<e&&n<4);return t}(t),c=a.length+1,u=new ArrayBuffer(t+c),l=new Uint8Array(u);if(l[0]=e,l.set(a,1),this.type==g.PUBLISH)c=w(this.payloadMessage.destinationName,i,l,c);else if(this.type==g.CONNECT){switch(this.mqttVersion){case 3:l.set(p,c),c+=p.length;break;case 4:l.set(m,c),c+=m.length}var d=0;this.cleanSession&&(d=2),null!=this.willMessage&&(d|=4,d|=this.willMessage.qos<<3,this.willMessage.retained&&(d|=32)),null!=this.userName&&(d|=128),null!=this.password&&(d|=64),l[c++]=d,c=y(this.keepAliveInterval,l,c)}switch(null!=this.messageIdentifier&&(c=y(this.messageIdentifier,l,c)),this.type){case g.CONNECT:c=w(this.clientId,I(this.clientId),l,c),null!=this.willMessage&&(c=w(this.willMessage.destinationName,I(this.willMessage.destinationName),l,c),c=y(o.byteLength,l,c),l.set(o,c),c+=o.byteLength),null!=this.userName&&(c=w(this.userName,I(this.userName),l,c)),null!=this.password&&(c=w(this.password,I(this.password),l,c));break;case g.PUBLISH:l.set(s,c);break;case g.SUBSCRIBE:for(r=0;r<this.topics.length;r++)c=w(this.topics[r],n[r],l,c),l[c++]=this.requestedQos[r];break;case g.UNSUBSCRIBE:for(r=0;r<this.topics.length;r++)c=w(this.topics[r],n[r],l,c)}return u};var i=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var i=new v(g.PINGREQ).encode(),o=function(e){return function(){return r.apply(e)}},r=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(i),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(f.PING_TIMEOUT.code,h(f.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),0<this._keepAliveInterval&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},o=function(e,t,n,i,o){this._window=t,n||(n=30);var r,s,a;this.timeout=setTimeout((r=i,s=e,a=o,function(){return r.apply(s,a)}),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},S=function(e,t,n,i,o){if(!("WebSocket"in s&&null!==s.WebSocket))throw new Error(h(f.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in s&&null!==s.localStorage))throw new Error(h(f.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in s&&null!==s.ArrayBuffer))throw new Error(h(f.UNSUPPORTED,["ArrayBuffer"]));for(var r in this._trace("Paho.MQTT.Client",e,t,n,i,o),this.host=t,this.port=n,this.path=i,this.uri=e,this.clientId=o,this._localKey=t+":"+n+("/mqtt"!=i?":"+i:"")+":"+o+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!=r.indexOf("Sent:"+this._localKey)&&0!=r.indexOf("Received:"+this._localKey)||this.restore(r)};S.prototype.connected=!1,S.prototype.maxMessageIdentifier=65536,S.prototype._msg_queue=null,S.prototype.sendPinger=null,S.prototype.receivePinger=null,S.prototype.receiveBuffer=null,S.prototype._traceBuffer=null,S.prototype._MAX_TRACE_ENTRIES=100,S.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(h(f.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(h(f.INVALID_STATE,["already connected"]));(this.connectOptions=e).uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},S.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(h(f.INVALID_STATE,["not connected"]));var n=new v(g.SUBSCRIBE);n.topics=[e],null!=t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(n.timeOut=new o(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:f.SUBSCRIBE_TIMEOUT.code,errorMessage:h(f.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},S.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(h(f.INVALID_STATE,["not connected"]));var n=new v(g.UNSUBSCRIBE);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new o(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:f.UNSUBSCRIBE_TIMEOUT.code,errorMessage:h(f.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},S.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(h(f.INVALID_STATE,["not connected"]));wireMessage=new v(g.PUBLISH),0<(wireMessage.payloadMessage=e).qos?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)},S.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(h(f.INVALID_STATE,["not connecting or connected"]));wireMessage=new v(g.DISCONNECT),this._notify_msg_sent[wireMessage]=n(this._disconnected,this),this._schedule_message(wireMessage)},S.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},S.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@")},S.prototype.stopTrace=function(){delete this._traceBuffer},S.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=n(this._on_socket_open,this),this.socket.onmessage=n(this._on_socket_message,this),this.socket.onerror=n(this._on_socket_error,this),this.socket.onclose=n(this._on_socket_close,this),this.sendPinger=new i(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new i(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new o(this,window,this.connectOptions.timeout,this._disconnected,[f.CONNECT_TIMEOUT.code,h(f.CONNECT_TIMEOUT)])},S.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},S.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case g.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var i="",o=t.payloadMessage.payloadBytes,r=0;r<o.length;r++)o[r]<=15?i=i+"0"+o[r].toString(16):i+=o[r].toString(16);n.payloadMessage.payloadHex=i,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(h(f.INVALID_STORED_DATA,[key,n]))}localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},S.prototype.restore=function(e){var t=localStorage.getItem(e),n=JSON.parse(t),i=new v(n.type,n);switch(n.type){case g.PUBLISH:for(var o=n.payloadMessage.payloadHex,r=new ArrayBuffer(o.length/2),s=new Uint8Array(r),a=0;2<=o.length;){var c=parseInt(o.substring(0,2),16);o=o.substring(2,o.length),s[a++]=c}var u=new Paho.MQTT.Message(s);u.qos=n.payloadMessage.qos,u.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(u.duplicate=!0),n.payloadMessage.retained&&(u.retained=!0),i.payloadMessage=u;break;default:throw Error(h(f.INVALID_STORED_DATA,[e,t]))}0==e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},S.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},S.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,(this._sentMessages[e.messageIdentifier]=e).type===g.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},S.prototype._on_socket_open=function(){var e=new v(g.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},S.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data),this.receivePinger.reset();for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},S.prototype._deframeMessages=function(e){var t=new Uint8Array(e);if(this.receiveBuffer){var n=new Uint8Array(this.receiveBuffer.length+t.length);n.set(this.receiveBuffer),n.set(t,this.receiveBuffer.length),t=n,delete this.receiveBuffer}try{for(var i=0,o=[];i<t.length;){var r=a(t,i),s=r[0];if(i=r[1],null===s)break;o.push(s)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(e){return void this._disconnected(f.INTERNAL_ERROR.code,h(f.INTERNAL_ERROR,[e.message,e.stack.toString()]))}return o},S.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case g.CONNACK:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+n.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(f.CONNACK_RETURNCODE.code,h(f.CONNACK_RETURNCODE,[e.returnCode,l[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var o=new Array;for(var r in this._sentMessages)this._sentMessages.hasOwnProperty(r)&&o.push(this._sentMessages[r]);o=o.sort(function(e,t){return e.sequence-t.sequence});for(var s=0,a=o.length;s<a;s++){if((n=o[s]).type==g.PUBLISH&&n.pubRecReceived){var c=new v(g.PUBREL,{messageIdentifier:n.messageIdentifier});this._schedule_message(c)}else this._schedule_message(n)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case g.PUBLISH:this._receivePublish(e);break;case g.PUBACK:(n=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case g.PUBREC:if(n=this._sentMessages[e.messageIdentifier]){n.pubRecReceived=!0;c=new v(g.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",n),this._schedule_message(c)}break;case g.PUBREL:i=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var u=new v(g.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(u);break;case g.PUBCOMP:n=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case g.SUBACK:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),128===e.returnCode[0]?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case g.UNSUBACK:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case g.PINGRESP:this.sendPinger.reset();break;case g.DISCONNECT:this._disconnected(f.INVALID_MQTT_MESSAGE_TYPE.code,h(f.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(f.INVALID_MQTT_MESSAGE_TYPE.code,h(f.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){return void this._disconnected(f.INTERNAL_ERROR.code,h(f.INTERNAL_ERROR,[e.message,e.stack.toString()]))}},S.prototype._on_socket_error=function(e){this._disconnected(f.SOCKET_ERROR.code,h(f.SOCKET_ERROR,[e.data]))},S.prototype._on_socket_close=function(){this._disconnected(f.SOCKET_CLOSE.code,h(f.SOCKET_CLOSE))},S.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},S.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new v(g.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new v(g.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},S.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},S.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=f.OK.code,t=h(f.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},S.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)void 0!==arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer){e=0;for(var n=arguments.length;e<n;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))}},S.prototype._traceMask=function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=i==t?"******":e[i]);return n};var e=function(e,t,s,n){var a;if("string"!=typeof e)throw new Error(h(f.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){n=t;var i=(a=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!i)throw new Error(h(f.INVALID_ARGUMENT,[e,"host"]));e=i[4]||i[2],t=parseInt(i[7]),s=i[8]}else{if(3==arguments.length&&(n=s,s="/mqtt"),"number"!=typeof t||t<0)throw new Error(h(f.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof s)throw new Error(h(f.INVALID_TYPE,[typeof s,"path"]));var o=-1!=e.indexOf(":")&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);a="ws://"+(o?"["+e+"]":e)+":"+t+s}for(var r=0,c=0;c<n.length;c++){var u=n.charCodeAt(c);55296<=u&&u<=56319&&c++,r++}if("string"!=typeof n||65535<r)throw new Error(h(f.INVALID_ARGUMENT,[n,"clientId"]));var l=new S(a,e,t,s,n);this._getHost=function(){return e},this._setHost=function(){throw new Error(h(f.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(h(f.UNSUPPORTED_OPERATION))},this._getPath=function(){return s},this._setPath=function(){throw new Error(h(f.UNSUPPORTED_OPERATION))},this._getURI=function(){return a},this._setURI=function(){throw new Error(h(f.UNSUPPORTED_OPERATION))},this._getClientId=function(){return l.clientId},this._setClientId=function(){throw new Error(h(f.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return l.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(h(f.INVALID_TYPE,[typeof e,"onConnectionLost"]));l.onConnectionLost=e},this._getOnMessageDelivered=function(){return l.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(h(f.INVALID_TYPE,[typeof e,"onMessageDelivered"]));l.onMessageDelivered=e},this._getOnMessageArrived=function(){return l.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(h(f.INVALID_TYPE,[typeof e,"onMessageArrived"]));l.onMessageArrived=e},this._getTrace=function(){return l.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(h(f.INVALID_TYPE,[typeof e,"onTrace"]));l.traceFunction=e},this.connect=function(e){if(d(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),4<e.mqttVersion||e.mqttVersion<3)throw new Error(h(f.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0===e.password&&void 0!==e.userName)throw new Error(h(f.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof E))throw new Error(h(f.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,void 0===e.willMessage.destinationName)throw new Error(h(f.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(h(f.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(h(f.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,n=0;n<e.hosts.length;n++){if("string"!=typeof e.hosts[n])throw new Error(h(f.INVALID_TYPE,[typeof e.hosts[n],"connectOptions.hosts["+n+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[n])){if(0==n)t=!0;else if(!t)throw new Error(h(f.INVALID_ARGUMENT,[e.hosts[n],"connectOptions.hosts["+n+"]"]))}else if(t)throw new Error(h(f.INVALID_ARGUMENT,[e.hosts[n],"connectOptions.hosts["+n+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(h(f.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(h(f.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(h(f.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(n=0;n<e.hosts.length;n++){if("number"!=typeof e.ports[n]||e.ports[n]<0)throw new Error(h(f.INVALID_TYPE,[typeof e.ports[n],"connectOptions.ports["+n+"]"]));var i=e.hosts[n],o=e.ports[n],r=-1!=i.indexOf(":");a="ws://"+(r?"["+i+"]":i)+":"+o+s,e.uris.push(a)}}}l.connect(e)},this.subscribe=function(e,t){if(0==e.length)throw new Error("Invalid argument:"+e);if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(console.log("订阅主题--------"+e),d(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(h(f.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));l.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(d(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");console.log("取消订阅主题--------"+e),l.unsubscribe(e,t)},this.send=function(e,t,n,i){var o;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(o=e).destinationName)throw new Error(h(f.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));l.send(o)}else(o=new E(t)).destinationName=e,3<=arguments.length&&(o.qos=n),4<=arguments.length&&(o.retained=i),l.send(o)},this.disconnect=function(){l.disconnect()},this.getTraceLog=function(){return l.getTraceLog()},this.startTrace=function(){l.startTrace()},this.stopTrace=function(){l.stopTrace()},this.isConnected=function(){return l.connected}};e.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var E=function(e){var n;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw h(f.INVALID_ARGUMENT,[e,"newPayload"]);n=e,this._getPayloadString=function(){return"string"==typeof n?n:T(n,0,n.length)},this._getPayloadBytes=function(){if("string"==typeof n){var e=new ArrayBuffer(I(n)),t=new Uint8Array(e);return c(n,t,0),t}return n};var t=void 0;this._getDestinationName=function(){return t},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(h(f.INVALID_ARGUMENT,[e,"newDestinationName"]));t=e};var i=0;this._getQos=function(){return i};var o=!(this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);i=e});this._getRetained=function(){return o};var r=!(this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(h(f.INVALID_ARGUMENT,[e,"newRetained"]));o=e});this._getDuplicate=function(){return r},this._setDuplicate=function(e){r=e}};return E.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:e,Message:E}}(window);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,o,r,s,a,c="",u=0;for(e=Base64._utf8_encode(e);u<e.length;)o=(t=e.charCodeAt(u++))>>2,r=(3&t)<<4|(n=e.charCodeAt(u++))>>4,s=(15&n)<<2|(i=e.charCodeAt(u++))>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),c=c+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return c},decode:function(e){var t,n,i,o,r,s,a="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(o=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(r=this._keyStr.indexOf(e.charAt(c++)))>>2,i=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!=r&&(a+=String.fromCharCode(n)),64!=s&&(a+=String.fromCharCode(i));return a=Base64._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):191<i&&i<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}};!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.clipboard=t():e.clipboard=t()}(this,function(){return function(n){function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var o={};return i.m=n,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,n){"use strict";function o(e){var t=new v,n=function(n,e,i){f("listener called"),n.success=!0,e.forEach(function(e,t){i.clipboardData.setData(t,e),t===g&&i.clipboardData.getData(t)!=e&&(f("setting text/plain failed"),n.success=!1)}),i.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function r(e,t){s(e);var n=o(t);return a(),n}function s(e){var t=document.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}function a(){document.getSelection().removeAllRanges()}function c(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function u(){return new d(function(e,t){var n=window.clipboardData.getData("Text");""===n?t(new Error("Empty clipboard or could not read plain text from clipboard")):e(n)})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),l=n(5),d="undefined"==typeof Promise?i.Promise:Promise,f=function(e){},h=!0,p=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),g="text/plain",m=function(){function e(){}return e.setDebugLog=function(e){f=e},e.suppressWarnings=function(){h=!1,l.suppressDTWarnings()},e.write=function(i){return h&&!i.getData(g)&&p("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),new d(function(e,t){if(c())(function(e){var t=e.getData(g);if(void 0!==t)return window.clipboardData.setData("Text",t);throw"No `text/plain` value was specified."})(i)?e():t(new Error("Copying failed, possibly because the user rejected it."));else{if(o(i))return f("regular execCopy worked"),void e();if(-1<navigator.userAgent.indexOf("Edge"))return f('UA "Edge" => assuming success'),void e();if(r(document.body,i))return f("copyUsingTempSelection worked"),void e();if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=r(t,e);return document.body.removeChild(t),n}(i))return f("copyUsingTempElem worked"),void e();var n=i.getData(g);if(void 0!==n&&function(e){f("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(f("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var i=document.createElement("span");i.innerText=e,n.appendChild(i),document.body.appendChild(t),s(i);var o=document.execCommand("copy");return a(),document.body.removeChild(t),o}(n))return f("copyTextUsingDOM worked"),void e();t(new Error("Copy command failed."))}})},e.writeText=function(e){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(e);var t=new l.DT;return t.setData(g,e),this.write(t)},e.read=function(){return new d(function(i,e){c()?u().then(function(e){return i((t=e,(n=new l.DT).setData(g,t),n));var t,n},e):e("Read is not supported in your browser.")})},e.readText=function(){return navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText():c()?u():new d(function(e,t){t("Read is not supported in your browser.")})},e.DT=l.DT,e}();t.default=m;var v=function(){this.success=!1};e.exports=m},function(e,t,F){(function(q,$){e.exports=function(){"use strict";function u(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<E;e+=2)(0,k[e])(k[e+1]),k[e]=void 0,k[e+1]=void 0;E=0}function a(e,t){var n=arguments,i=this,o=new this.constructor(l);void 0===o[L]&&y(o);var r,s=i._state;return s?(r=n[s-1],A(function(){return v(s,o,r,i._result)})):g(i,o,e,t),o}function c(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(l);return f(t,e),t}function l(){}function s(e){try{return e.then}catch(e){return V.error=e,V}}function d(e,t,n){var i,o,r,s;t.constructor===e.constructor&&n===a&&t.constructor.resolve===c?(r=e,(s=t)._state===R?h(r,s._result):s._state===B?p(r,s._result):g(s,void 0,function(e){return f(r,e)},function(e){return p(r,e)})):n===V?(p(e,V.error),V.error=null):void 0===n?h(e,t):u(n)?(i=t,o=n,A(function(t){var n=!1,e=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(o,i,function(e){n||(n=!0,i!==e?f(t,e):h(t,e))},function(e){n||(n=!0,p(t,e))},t._label);!n&&e&&(n=!0,p(t,e))},e)):h(e,t)}function f(e,t){var n,i;e===t?p(e,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=t),null===n||"object"!==i&&"function"!==i?h(e,t):d(e,t,s(t)))}function i(e){e._onerror&&e._onerror(e._result),m(e)}function h(e,t){e._state===U&&(e._result=t,e._state=R,0!==e._subscribers.length&&A(m,e))}function p(e,t){e._state===U&&(e._state=B,e._result=t,A(i,e))}function g(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+R]=n,o[r+B]=i,0===r&&e._state&&A(m,e)}function m(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?v(n,i,o,r):o(r);e._subscribers.length=0}}function e(){this.error=null}function v(e,t,n,i){var o=u(n),r=void 0,s=void 0,a=void 0,c=void 0;if(o){if((r=function(e,t){try{return e(t)}catch(e){return j.error=e,j}}(n,i))===j?(c=!0,s=r.error,r.error=null):a=!0,t===r)return void p(t,new TypeError("A promises callback cannot return that same promise."))}else r=i,a=!0;t._state!==U||(o&&a?f(t,r):c?p(t,s):e===R?h(t,r):e===B&&p(t,r))}function y(e){e[L]=J++,e._state=void 0,e._result=void 0,e._subscribers=[]}function o(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[L]||y(this.promise),S(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}function w(e){this[L]=J++,this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof w?function(t,e){try{e(function(e){f(t,e)},function(e){p(t,e)})}catch(e){p(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var r,_,I,T,S=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},E=0,b=void 0,C=void 0,A=function(e,t){k[E]=e,k[E+1]=t,2===(E+=2)&&(C?C(n):D())},M="undefined"!=typeof window?window:void 0,O=M||{},N=O.MutationObserver||O.WebKitMutationObserver,x="undefined"==typeof self&&void 0!==q&&"[object process]"==={}.toString.call(q),P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,k=new Array(1e3),D=void 0;D=x?function(){return q.nextTick(n)}:N?(_=0,I=new N(n),T=document.createTextNode(""),I.observe(T,{characterData:!0}),function(){T.data=_=++_%2}):P?((r=new MessageChannel).port1.onmessage=n,function(){return r.port2.postMessage(0)}):void 0===M?function(){try{var e=F(4);return void 0!==(b=e.runOnLoop||e.runOnContext)?function(){b(n)}:t()}catch(e){return t()}}():t();var L=Math.random().toString(36).substring(16),U=void 0,R=1,B=2,V=new e,j=new e,J=0;return o.prototype._enumerate=function(e){for(var t=0;this._state===U&&t<e.length;t++)this._eachEntry(e[t],t)},o.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===c){var o=s(t);if(o===a&&t._state!==U)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===w){var r=new n(l);d(r,t,o),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},o.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===U&&(this._remaining--,e===B?p(i,n):this._result[t]=n),0===this._remaining&&h(i,this._result)},o.prototype._willSettleAt=function(e,t){var n=this;g(e,void 0,function(e){return n._settledAt(R,t,e)},function(e){return n._settledAt(B,t,e)})},w.all=function(e){return new o(this,e).promise},w.race=function(o){var r=this;return new r(S(o)?function(e,t){for(var n=o.length,i=0;i<n;i++)r.resolve(o[i]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},w.resolve=c,w.reject=function(e){var t=new this(l);return p(t,e),t},w._setScheduler=function(e){C=e},w._setAsap=function(e){A=e},w._asap=A,w.prototype={constructor:w,then:a,catch:function(e){return this.then(null,e)}},w.polyfill=function(){var e=void 0;if(void 0!==$)e=$;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=w},w.Promise=w}()}).call(t,F(2),F(3))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(){p&&f&&(p=!1,f.length?h=f.concat(h):g=-1,h.length&&s())}function s(){if(!p){var e=o(r);p=!0;for(var t=h.length;t;){for(f=h,h=[];++g<t;)f&&f[g].run();g=-1,t=h.length}f=null,p=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var u,l,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(e){l=i}}();var f,h=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new a(e,t)),1!==h.length||p||o(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["text/plain","text/html"],o=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),r=!0;t.suppressDTWarnings=function(){r=!1};var s=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){r&&-1===i.indexOf(e)&&o("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}();t.DT=s}])}),function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(e)}):t(e,!0)}(this,function(o,e){function a(t,e,n){o.WeixinJSBridge?WeixinJSBridge.invoke(t,r(e),function(e){s(t,e,n)}):u(t,n)}function n(t,n,i){o.WeixinJSBridge?WeixinJSBridge.on(t,function(e){i&&i.trigger&&i.trigger(e),s(t,e,n)}):u(t,i||n)}function r(e){return(e=e||{}).appId=b.appId,e.verifyAppId=b.appId,e.verifySignType="sha1",e.verifyTimestamp=b.timestamp+"",e.verifyNonceStr=b.nonceStr,e.verifySignature=b.signature,e}function t(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function s(e,t,n){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var i=t.errMsg;i||(i=t.err_msg,delete t.err_msg,i=function(e,t){var n=e,i=h[n];i&&(n=i);var o="ok";if(t){var r=t.indexOf(":");"confirm"==(o=t.substring(r+1))&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),"access denied"!=(o=(o=o.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=o||(o="permission denied"),"config"==n&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return t=n+":"+o}(e,i),t.errMsg=i),(n=n||{})._complete&&(n._complete(t),delete n._complete),i=t.errMsg||"",b.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var o=i.indexOf(":");switch(i.substring(o+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function c(e){if(e){for(var t=0,n=e.length;t<n;++t){var i=e[t],o=f[i];o&&(e[t]=o)}return e}}function u(e,t){if(!(!b.debug||t&&t.isInnerInvoke)){var n=h[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function l(){return(new Date).getTime()}function d(e){w&&(o.WeixinJSBridge?e():i.addEventListener&&i.addEventListener("WeixinJSBridgeReady",e,!1))}if(!o.jWeixin){var f={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},h=function(){var e={};for(var t in f)e[f[t]]=t;return e}(),i=o.document,p=i.title,g=navigator.userAgent.toLowerCase(),m=navigator.platform.toLowerCase(),v=!(!m.match("mac")&&!m.match("win")),y=-1!=g.indexOf("wxdebugger"),w=-1!=g.indexOf("micromessenger"),_=-1!=g.indexOf("android"),I=-1!=g.indexOf("iphone")||-1!=g.indexOf("ipad"),T=(k=g.match(/micromessenger\/(\d+\.\d+\.\d+)/)||g.match(/micromessenger\/(\d+\.\d+)/))?k[1]:"",S={initStartTime:l(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},E={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:I?1:_?2:-1,clientVersion:T,url:encodeURIComponent(location.href)},b={},C={_completes:[]},A={state:0,data:{}};d(function(){S.initEndTime=l()});var M=!1,O=[],N={config:function(e){u("config",b=e);var i=!1!==b.check;d(function(){if(i)a(f.config,{verifyJsApiList:c(b.jsApiList)},function(){C._complete=function(e){S.preVerifyEndTime=l(),A.state=1,A.data=e},C.success=function(e){E.isPreVerifyOk=0},C.fail=function(e){C._fail?C._fail(e):A.state=-1};var i=C._completes;return i.push(function(){!function(e){if(!(v||y||b.debug||T<"6.0.2"||E.systemType<0)){var n=new Image;E.appId=b.appId,E.initTime=S.initEndTime-S.initStartTime,E.preVerifyTime=S.preVerifyEndTime-S.preVerifyStartTime,N.getNetworkType({isInnerInvoke:!0,success:function(e){E.networkType=e.networkType;var t="https://open.weixin.qq.com/sdk/report?v="+E.version+"&o="+E.isPreVerifyOk+"&s="+E.systemType+"&c="+E.clientVersion+"&a="+E.appId+"&n="+E.networkType+"&i="+E.initTime+"&p="+E.preVerifyTime+"&u="+E.url;n.src=t}})}}()}),C.complete=function(e){for(var t=0,n=i.length;t<n;++t)i[t]();C._completes=[]},C}()),S.preVerifyStartTime=l();else{A.state=1;for(var e=C._completes,t=0,n=e.length;t<n;++t)e[t]();C._completes=[]}}),N.invoke||(N.invoke=function(e,t,n){o.WeixinJSBridge&&WeixinJSBridge.invoke(e,r(t),n)},N.on=function(e,t){o.WeixinJSBridge&&WeixinJSBridge.on(e,t)})},ready:function(e){0!=A.state?e():(C._completes.push(e),!w&&b.debug&&e())},error:function(e){T<"6.0.2"||(-1==A.state?e(A.data):C._fail=e)},checkJsApi:function(e){a("checkJsApi",{jsApiList:c(e.jsApiList)},(e._complete=function(e){if(_){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var n in t){var i=h[n];i&&(t[i]=t[n],delete t[n])}return e}(e)},e))},onMenuShareTimeline:function(e){n(f.onMenuShareTimeline,{complete:function(){a("shareTimeline",{title:e.title||p,desc:e.title||p,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(t){n(f.onMenuShareAppMessage,{complete:function(e){"favorite"===e.scene?a("sendAppMessage",{title:t.title||p,desc:t.desc||"",link:t.link||location.href,img_url:t.imgUrl||"",type:t.type||"link",data_url:t.dataUrl||""}):a("sendAppMessage",{title:t.title||p,desc:t.desc||"",link:t.link||location.href,img_url:t.imgUrl||"",type:t.type||"link",data_url:t.dataUrl||""},t)}},t)},onMenuShareQQ:function(e){n(f.onMenuShareQQ,{complete:function(){a("shareQQ",{title:e.title||p,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){n(f.onMenuShareWeibo,{complete:function(){a("shareWeiboApp",{title:e.title||p,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){n(f.onMenuShareQZone,{complete:function(){a("shareQZone",{title:e.title||p,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){a("startRecord",{},e)},stopRecord:function(e){a("stopRecord",{},e)},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e)},playVoice:function(e){a("playVoice",{localId:e.localId},e)},pauseVoice:function(e){a("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){a("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e)},uploadVoice:function(e){a("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){a("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){a("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){a("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(_){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e))},getLocation:function(e){},previewImage:function(e){a(f.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){a("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){a("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===M?(M=!0,a("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(M=!1,0<O.length){var t=O.shift();wx.getLocalImgData(t)}},e))):O.push(e)},getNetworkType:function(e){a("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var i=t.indexOf(":"),o=t.substring(i+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){a("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},a(f.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type},e))},hideOptionMenu:function(e){a("hideOptionMenu",{},e)},showOptionMenu:function(e){a("showOptionMenu",{},e)},closeWindow:function(e){a("closeWindow",{},e=e||{})},hideMenuItems:function(e){a("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){a("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){a("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){a("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){a("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(I){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e))},openAddress:function(e){a(f.openAddress,{},(e._complete=function(e){var t;(t=e).postalCode=t.addressPostalCode,delete t.addressPostalCode,t.provinceName=t.proviceFirstStageName,delete t.proviceFirstStageName,t.cityName=t.addressCitySecondStageName,delete t.addressCitySecondStageName,t.countryName=t.addressCountiesThirdStageName,delete t.addressCountiesThirdStageName,t.detailInfo=t.addressDetailInfo,delete t.addressDetailInfo,e=t},e))},openProductSpecificView:function(e){a(f.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,n=[],i=0,o=t.length;i<o;++i){var r=t[i],s={card_id:r.cardId,card_ext:r.cardExt};n.push(s)}a(f.addCard,{card_list:n},(e._complete=function(e){var t=e.card_list;if(t){for(var n=0,i=(t=JSON.parse(t)).length;n<i;++n){var o=t[n];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},e))},chooseCard:function(e){a("chooseCard",{app_id:b.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},openCard:function(e){for(var t=e.cardList,n=[],i=0,o=t.length;i<o;++i){var r=t[i],s={card_id:r.cardId,code:r.code};n.push(s)}a(f.openCard,{card_list:n},e)},consumeAndShareCard:function(e){a(f.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){a(f.chooseWXPay,t(e),e)},openEnterpriseRedPacket:function(e){a(f.openEnterpriseRedPacket,t(e),e)},startSearchBeacons:function(e){a(f.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){a(f.stopSearchBeacons,{},e)},onSearchBeacons:function(e){n(f.onSearchBeacons,e)},openEnterpriseChat:function(e){a("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)},launchMiniProgram:function(e){a("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}}(e.path),envVersion:e.envVersion},e)},miniProgram:{navigateBack:function(e){e=e||{},d(function(){a("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)})},navigateTo:function(e){d(function(){a("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)})},redirectTo:function(e){d(function(){a("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)})},switchTab:function(e){d(function(){a("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)})},reLaunch:function(e){d(function(){a("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)})},postMessage:function(e){d(function(){a("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)})},getEnv:function(e){d(function(){e({miniprogram:"miniprogram"===o.__wxjs_environment})})}}},x=1,P={};return i.addEventListener("error",function(e){if(!_){var t=e.target,n=t.tagName,i=t.src;if(("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n)&&-1!=i.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var o=t["wx-id"];if(o||(o=x++,t["wx-id"]=o),P[o])return;P[o]=!0,wx.ready(function(){wx.getLocalImgData({localId:i,success:function(e){t.src=e.localData}})})}}},!0),i.addEventListener("load",function(e){if(!_){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var i=t["wx-id"];i&&(P[i]=!1)}}},!0),e&&(o.wx=o.jWeixin=N),N}var k});