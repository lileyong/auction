<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no" name="format-detection">
    <meta name="Cache-Type" content='image/gif,image/png,image/jpg'/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>签到领福利</title>
    <meta name="description" content="">
    <meta name="keywords" content="index">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <meta name="apple-mobile-web-app-title" content=""/>
    <script type="text/javascript" src="../js/flexible.js"></script>
    <script type="text/javascript" src="../js/flexible_css.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <style>


        .sign-bottom {
            background: url('../img/activity/sign/sign.png') no-repeat 0 0;
            background-size: 19.52rem 11.28rem;
            width: 10rem;
            height: 3.613333rem;
            display: inline-block;
        }

        .sign-day15 {
            background: url('../img/activity/sign/sign.png') no-repeat -18.573333rem -2.853333rem;
            background-size: 19.52rem 11.28rem;
            width: 0.666667rem;
            height: 0.666667rem;
            display: inline-block;
        }

        .sign-day30 {
            background: url('../img/activity/sign/sign.png') no-repeat -7.906667rem -5.506667rem;
            background-size: 19.52rem 11.28rem;
            width: 0.666667rem;
            height: 0.666667rem;
            display: inline-block;
        }

        .sign-day7 {
            background: url('../img/activity/sign/sign.png') no-repeat -7.106667rem -5.506667rem;
            background-size: 19.52rem 11.28rem;
            width: 0.666667rem;
            height: 0.666667rem;
            display: inline-block;
        }

        .sign-fb {
            background: url('../img/activity/sign/sign.png') no-repeat 0 -3.746667rem;
            background-size: 19.52rem 11.28rem;
            width: 6.973333rem;
            height: 2.866667rem;
            display: inline-block;
        }

        .sign-gzDown {
            background: url('../img/activity/sign/sign.png') no-repeat -8.613333rem -6.746667rem;
            background-size: 19.52rem 11.28rem;
            width: 0.853333rem;
            height: 1.12rem;
            display: inline-block;
        }

        .sign-gzTitle {
            background: url('../img/activity/sign/sign.png') no-repeat -10.133333rem -2.853333rem;
            background-size: 19.52rem 11.28rem;
            width: 8.306667rem;
            height: 1.08rem;
            display: inline-block;
        }

        .sign-gzUP {
            background: url('../img/activity/sign/sign.png') no-repeat -8.866667rem -3.746667rem;
            background-size: 19.52rem 11.28rem;
            width: 0.853333rem;
            height: 1.12rem;
            display: inline-block;
        }

        .sign-hotOver {
            background: url('../img/activity/sign/sign.png') no-repeat -18.293333rem -6.773333rem;
            background-size: 19.52rem 11.28rem;
            width: 1.066667rem;
            height: 1.066667rem;
            display: inline-block;
        }

        .sign-info1 {
            background: url('../img/activity/sign/sign.png') no-repeat -14.693333rem -4.066667rem;
            background-size: 19.52rem 11.28rem;
            width: 2rem;
            height: 2.266667rem;
            display: inline-block;
        }

        .sign-info15 {
            background: url('../img/activity/sign/sign.png') no-repeat 0 -9.653333rem;
            background-size: 19.52rem 11.28rem;
            width: 1.626667rem;
            height: 1.626667rem;
            display: inline-block;
        }

        .sign-info15a {
            background: url('../img/activity/sign/sign.png') no-repeat -1.76rem -9.653333rem;
            background-size: 19.52rem 11.28rem;
            width: 1.626667rem;
            height: 1.626667rem;
            display: inline-block;
        }

        .sign-info2 {
            background: url('../img/activity/sign/sign.png') no-repeat -12.56rem -4.066667rem;
            background-size: 19.52rem 11.28rem;
            width: 2rem;
            height: 2.266667rem;
            display: inline-block;
        }

        .sign-info3 {
            background: url('../img/activity/sign/sign.png') no-repeat -16.826667rem -4.066667rem;
            background-size: 19.52rem 11.28rem;
            width: 2rem;
            height: 2.266667rem;
            display: inline-block;
        }

        .sign-info30 {
            background: url('../img/activity/sign/sign.png') no-repeat -7.106667rem -3.746667rem;
            background-size: 19.52rem 11.28rem;
            width: 1.626667rem;
            height: 1.626667rem;
            display: inline-block;
        }

        .sign-info30a {
            background: url('../img/activity/sign/sign.png') no-repeat -6.853333rem -6.746667rem;
            background-size: 19.52rem 11.28rem;
            width: 1.626667rem;
            height: 1.626667rem;
            display: inline-block;
        }

        .sign-info4 {
            background: url('../img/activity/sign/sign.png') no-repeat -10.133333rem -6.773333rem;
            background-size: 19.52rem 11.28rem;
            width: 2rem;
            height: 2.266667rem;
            display: inline-block;
        }

        .sign-info5 {
            background: url('../img/activity/sign/sign.png') no-repeat -12.266667rem -6.773333rem;
            background-size: 19.52rem 11.28rem;
            width: 2rem;
            height: 2.266667rem;
            display: inline-block;
        }

        .sign-info6 {
            background: url('../img/activity/sign/sign.png') no-repeat -14.4rem -6.773333rem;
            background-size: 19.52rem 11.28rem;
            width: 2rem;
            height: 2.266667rem;
            display: inline-block;
        }

        .sign-info7 {
            background: url('../img/activity/sign/sign.png') no-repeat -3.52rem -9.653333rem;
            background-size: 19.52rem 11.28rem;
            width: 1.626667rem;
            height: 1.626667rem;
            display: inline-block;
        }

        .sign-info7a {
            background: url('../img/activity/sign/sign.png') no-repeat -16.533333rem -6.773333rem;
            background-size: 19.52rem 11.28rem;
            width: 1.626667rem;
            height: 1.626667rem;
            display: inline-block;
        }

        .sign-info_bg {
            background: url('../img/activity/sign/sign.png') no-repeat -10.133333rem -4.066667rem;
            background-size: 19.52rem 11.28rem;
            width: 2.293333rem;
            height: 2.573333rem;
            display: inline-block;
        }

        .sign-newUser {
            background: url('../img/activity/sign/sign.png') no-repeat 0 -6.746667rem;
            background-size: 19.52rem 11.28rem;
            width: 6.72rem;
            height: 2.773333rem;
            display: inline-block;
        }

        .sign-sign_btn {
            background: url('../img/activity/sign/sign.png') no-repeat -10.133333rem -1.426667rem;
            background-size: 19.52rem 11.28rem;
            width: 9.386667rem;
            height: 1.293333rem;
            display: inline-block;
        }

        .sign-sign_over_btn { background: url('../img/activity/sign/sign.png') no-repeat -10.133333rem 0;background-size: 19.52rem 11.28rem; width: 9.386667rem;  height: 1.293333rem;  display: inline-block;
        }

        body{background: #be0e57;width: 100%;overflow-x:hidden;}
        .sign_bg1{background: url("../img/activity/sign/bg1.png") no-repeat;width: 100%;height: 4.64rem;background-size: 100% auto;position: relative;}
        .sign_bg1 i{position: absolute;right: 0.266667rem; top: 0;width: 0.8533334rem;height: 1.12rem;}
        .sing_cont{
            margin-top: -0.5rem;
            height: 7.33333333rem;width: 100%;
            background: -webkit-linear-gradient(#f93f41, #da213b); /* Safari 5.1 - 6.0 */
            background: -o-linear-gradient(#f93f41, #da213b); /* Opera 11.1 - 12.0 */
            background: -moz-linear-gradient(#f93f41, #da213b); /* Firefox 3.6 - 15 */
            background: linear-gradient(#f93f41, #da213b); /* 标准的语法 */
        }
        .sign_bg2{margin-top: -0.1rem;background: url("../img/activity/sign/bg2.png") no-repeat;width: 100%;height: 4.56rem;background-size: 100% auto;position: relative;}
        .sing_cont_line{margin:0 0.24rem;height: 2.56rem;display: -webkit-box;padding: 0.1333rem 0;}
        .line2{margin: 0 1.493333rem;}
        .sing_cont_el{ -webkit-box-flex: 1;text-align: center;margin: 0 .12rem;background: url("../img/activity/sign/info_bg.png") no-repeat;background-size: 100% auto;position: relative;width: 0;}
        .sing_cont_el span{position: absolute;top:0;left: 0;}
        .sing_cont_el.ok{background: url("../img/activity/sign/info_bg1.png") no-repeat;background-size: 100% auto;}
        .sing_cont_el.over .cont_num,.sing_cont_el.over .sign-info1,.sing_cont_el.over .cont_cont{opacity: .5;}
        .sing_cont_el.over:after{content: '';position: absolute;top: 0;left: .11rem;width:0.5466666rem;height:0.5466666rem;background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAARVBMVEUAAAD9Yen9Yen9Yen9Yen9Yen9Yen9Yen9Yen////9bOv+wvb9dez/7Pz+y/j+jO///P//8f3/2fr+lfD9iO7+uPX+oPKlsWrhAAAACHRSTlMAgJL61yoGu+lryHMAAACxSURBVDjLjc7bDoJADEXRzU0dQFAU//9TJfhwIm3I6ePMSncB6Oq2uZ1PBVzqUyJ3Dc+fYYyOuO9VyhRdF67rn6WswSULp1LufXC0SbjM0dEk4SFx5OHoyMPRkYSDE+yTsJzgUpa3wkcnOG7fG1VY7rBxffyownL/N47DTvewXISig1yEogpXZFB0loswTO5wHa7DdbgO1+E6XIfrcB2uw3W4DtfhOlyH63AdrsN1uO4L7PUZxC2zNsMAAAAASUVORK5CYII=") no-repeat;background-size: 100% 100%;}
        .cont_num{color: #ff7678;height: 50%;font-size: 0.32rem;padding-top: .1rem;}
        .cont_img{position: absolute;width: 100%;top: 0;left: 0;}
        .cont_cont{color: #e33a44;font-size: 0.22666rem;position: absolute;margin-top: 1.1rem;width: 100%;}
        .sing_btn{margin: 0 0.346666500rem;}
        .bottomBOX{width: 100%;height: 3.6133333333333333rem;position: fixed;bottom: 0;left: 0;}
        .sing_jd_box{margin-left: 0.5733333rem;margin-right: 0.653333rem;top: 1.2rem;text-align:center;position: relative;font-size: .36rem;color: #feaf1e;height: 0.4rem;border-radius: 0.2rem;background: #e7896b;}
        .sing_jd_day em{width: 0.6666666rem;height: 0.6666666rem;top:-.16rem;z-index: 3;margin-left: -0.33333rem;}
        .sing_jd_day em:nth-child(1){position: absolute;left: 23.33%;}
        .sing_jd_day em:nth-child(2){position: absolute;left: 50%;}
        .sing_jd_day em:nth-child(3){position: absolute;left: 95%;}
        .sing_jd{height: 0.4rem;background: #fccc0c;border-radius: 0.2rem;width: 0%;position: absolute;z-index: 2;top:0;text-align: left;}
        .sing_jd_bg{height: 0.4rem;background: #f1aa3d;border-radius: 0.2rem;width: 0%;position: absolute;top:0;z-index: 1;}
        .sing_jd span{color: #aa0c0c;display: inline-block;line-height: .4rem;margin-left: .1rem;white-space: nowrap;}
        .sing_cont_2{margin-right: 0.653333rem;position: relative;top: 1rem;}
        .sing_cont_2 img{width: 100%;}
        .sing_cont_2>div{position: absolute;width: 1.626667rem;margin-left: -0.656rem;left:21.33%;z-index: 10;}
        .sing_cont_2>div:nth-child(2){left:50%;}
        .sing_cont_2>div:nth-child(3){left:95%;}
        .signAlert{z-index: 102;position: fixed;left: 50%;top: 4rem;
            margin-left: -3.733333333rem;width:7.466666666rem;height:10.73333333rem;background: url("../img/activity/sign/signAlertBg.png") no-repeat;background-size: 100% auto;}
        .signAlert1{z-index: 102;position: fixed;left: 50%;top: 4rem;
            margin-left: -3.733333333rem;width:7.466666666rem;height:10.1333333rem;background: url("../img/activity/sign/signAlertBg1.png") no-repeat;background-size: 100% auto;}
        .signAlert1 p{margin-top: 4.4rem;text-align: center;color: #ffe591;font-size: 0.66666666666rem;}
        .signAlert p{margin-top: 3.7rem; text-align: center;font-size: 0.66666666666rem;color: #fff;}
        .alertClose{position: absolute;width: 1.5rem;height: 1.5rem;right: 0;top:2rem;}
        .alertTitle{margin-top: 1.75rem;margin-bottom: .6rem;  color: #fff;  text-align: center;  font-size: .4rem;}
        .alertCont{text-align: center;position: relative;}
        .alertHot{width: 6.6666666666rem;background: #fff;height: 2.52rem;margin: 0 auto;text-align: left;position: relative;}
        .hotOverIcon{position: absolute;left: 0.13333rem;top:0.133rem; background: url('../img/activity/sign/sign.png') no-repeat -18.293333rem -6.773333rem;  background-size: 19.52rem 11.28rem;  width: 1.066667rem;  height: 1.066667rem;}
        .alertHot .hotOverIcon{display: none;}
        .alertHot.over .hotOverIcon{display: block;}
        .hotImg{width: 2rem;height:2rem;margin-top: .26rem;margin-left: .26rem;}
        .hotCont{position: absolute;bottom: .4rem;left: 2.64rem;}
        .hotTitle{font-size: 0.346666rem;color: #666666;display: block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;  max-width: 4rem;}
        .hotHistory{color: #999;font-size: 0.32rem;display: block;margin: .2rem 0;margin-bottom: .05rem;}
        .hotPrice{color: #333;font-size: 0.32rem;display: block;}
        .hotPrice em{color: #e23955;}
        .alertGetMore{width: 6.6666666666rem;background: #fff;height: 2.52rem;margin: 0 auto;text-align: left;position: relative;font-size: .4rem;color: #666666;padding: 0 0.2666666666rem;}
        .alertGetMore span{color: #df3457;position: absolute;right: .7rem;}
        .alertGetMore i{display:inline-block;width:0.24rem;height:0.4533333rem;top:.4rem;position: absolute;right: .1rem;background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAgCAYAAAD0S5PyAAABGUlEQVRIDaXVPW6DQBAF4DcImhQcIO4dNz6EOUNOgfY4NNwhnd37EKnsOskBtkgD6EVj2VZsWNifkRAFu59mRjsL2rZ90QcJkZH8JHlummYd62QichKRVVEUx1goA/AO4AjgNRYSLeHakwOAHYCfrut2xpizb3kXJBW6IynQAxILjZAYaBIJhZxICDSL+EKLiA/khSxB3sgcFIRMQF8A3nQAg4MkdRNJsdZKUCY6qCT3IlLpoA7DUNV1ffJGXIBm5IXMAV7IEqDIbGOfAb2stAe68X84y5kCXLfdJBICaEYjJBQYITHAAxIL3JEU4IKkAoroOfm4zULoT0sBjRzAhuR33/eV6xxc1zpfubV2W5YljTG/zlULH/4AvTksf+qW0Y8AAAAASUVORK5CYII=");background-size:0.24rem 0.4533333rem;}
        .alertGetMore>div:first-child{border-bottom: 1px solid #d9d9d9;}
        .getMoreOne{height: 1.26rem;line-height: 1.26rem;height: 1.26rem;line-height: 1.26rem;position: relative;}
        .getMoreTwo{height: 1.26rem;line-height: 1.26rem;position: relative;}
        #ggg{ position: relative;}
        .ggkDesc{font-size: .5rem;margin-top: .5rem;color: #77373f;}
        .ggkBtn{font-size: .36rem;color: #fff;left: 50%;position: absolute;top:1.4rem;transform: translateX(-50%);height: .8rem;line-height: .8rem;width: 3.4rem;}
        #ruleBox{background: #fff0ee;
            position: relative;
            height: 5.653333rem;
            z-index: 103;border-bottom-left-radius: .2rem;border-bottom-right-radius: .2rem;display: none;}
        .sign-gzTitle{margin-left: 0.84666650000000rem;
            margin-top: .8rem;}
        #ruleText{margin: .5rem 0.8466665rem;
            font-size: 0.37rem;}
        .sign-gzUP{position: absolute;
            bottom: -1.12rem;
            right: 0.266667rem;}
        @-webkit-keyframes shake {
            from,
            to {
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                -webkit-transform: translate3d(-0.1333rem, 0, 0);
                transform: translate3d(-0.1333rem, 0, 0);
            }

            20%,
            40%,
            60%,
            80% {
                -webkit-transform: translate3d(0.1333rem, 0, 0);
                transform: translate3d(0.1333rem, 0, 0);
            }
        }
        @keyframes shake {
            from,
            to {
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
            10%,
            30%,
            50%,
            70%,
            90% {
                -webkit-transform: translate3d(-0.1333rem, 0, 0);
                transform: translate3d(-0.1333rem, 0, 0);
            }
            20%,
            40%,
            60%,
            80% {
                -webkit-transform: translate3d(10px, 0, 0);
                transform: translate3d(10px, 0, 0);
            }
        }
        .shake {
            -webkit-animation: shakes 2s linear infinite;
            animation: shake 2s linear infinite;
            animation-fill-mode: both
        }
        /*.canvas{
            position: absolute;
            top: .18rem;
            left: .28rem;
            width: 6.4rem;
            height: 2.28rem;
            text-align: center;
            z-index: 2;
            border-radius: .3rem;
        }*/
        .canvas{
            position: absolute;
            top: 0;
            left: 0;
            width: 6.973333rem;
            height: 2.866667rem;
            text-align: center;
            z-index: 2;
        }
    </style>
</head>
<body>
<div class="navbar">
    <div class="back_arrow back_home" id="back"></div>
    <h1>签到领福利</h1>
</div>
<div class="mainContent" id="main">
    <div class="content" id="content">
        <div class="sign_bg1">
            <i class="sign-gzDown"></i>
            <div id="ruleBox">
                <span class="sign-gzTitle"></span>
                <div id="ruleText">
                    <p>1.每日签到可得对应天数下方得奖励；</p>
                    <p>2.累计签到7天、15天、30天可得对应奖励；</p>
                    <p>3.签到活动每自然月重置一次，请即时领取签到奖励，过期将无效。</p>
                </div>
                <span class="sign-gzUP"></span>
            </div>
        </div>
        <div class="sing_cont">
            <div id="singContBox">
                <div class="sing_cont_line">
                    <!-- <div class="sing_cont_el">
                         <div class="cont_num">第一次</div>
                         <div><img class="cont_img" src="http://dev.ruirun123.cn:8050//info/83de20d1ea2d434fb2740b7071990f37.png"></div>
                         <div class="cont_cont">1赠币</div>
                     </div>
                     <div class="sing_cont_el"></div>
                     <div class="sing_cont_el"></div>
                     <div class="sing_cont_el"></div>-->
                </div>
                <div class="sing_cont_line line2">
                    <!-- <div class="sing_cont_el"></div>
                     <div class="sing_cont_el"></div>
                     <div class="sing_cont_el"></div>-->
                </div>
            </div>
            <div class="sing_btn sign-sign_btn" id="signBtn"></div>
        </div>
        <div class="sign_bg2">
            <div class="sing_jd_box">
                <div class="sing_jd"><span><i id="singCount">-</i>天</span></div>
                <div class="sing_jd_bg"></div>
                <div class="sing_jd_day"><em class="sign-day7"></em><em class="sign-day15"></em><em class="sign-day30"></em></div>
                <div class="sing_cont_2" id="singContBoxA">
                    <!-- <div>
                         <img src="../img/activity/sign/day7.png">
                         <p>10赠币</p>
                     </div>
                     <div>
                         <img src="../img/activity/sign/day15.png">
                         <p>10赠币</p>
                     </div>
                     <div>
                         <img src="../img/activity/sign/day30.png">
                         <p>10赠币</p>
                     </div>-->
                </div>
            </div>
        </div>
        <div class="bottomBOX sign-bottom"></div>
    </div>
    <div>
        <div class="signAlert hide">
            <span class="alertClose"></span>
            <p>获得<em>--</em></p>
            <div class="alertTitle">----</div>
            <div class="alertCont">
                <!--<div class="alertGetMore">
                    <div class="getMoreOne">每日首次分享<span>1赠币</span><i></i></div>
                    <div class="getMoreTwo">拍中晒单奖励<span>8赠币</span><i></i></div>
                </div>-->
                <div class="gggBox sign-fb" id="ggg">
                    <div class="ggkDesc">恭喜您获得1赠币</div>
                    <div class="ggkBtn">去竞拍热门商品</div>
                </div>

                <!--<div class="alertHot">
                    <img class="hotImg" src="../img/activity/signIcon/info30a.png">
                    <div class="hotCont">
                        <span class="hotTitle">macbookpro 顶配版 无敌</span>
                        <span class="hotHistory">上期拍中价格:￥8888.00</span>
                        <span class="hotPrice">当前竞拍价:<em>￥6888.00</em></span>
                    </div>
                </div>-->
            </div>
        </div>
        <div class="signAlert1 hide"><p>获得<em>--</em></p></div>
    </div>
    <div class="mask hide"></div>

</div>
<script type="text/javascript" src="../js/zepto.min.js"></script>
<script type="text/javascript" src="../js/main.js"></script>
<script>
    T.sign = (function(){
        var signCount = 0;//签到累计天数
        var o = {
            init:function(){
                var imgs = new Image();
                imgs.src = "../img/activity/sign/bg.png";
                o.getSignList();//获取签到列表
                o.bindEvent();//事件绑定
                //banner内每个页面的PV/UV（banner_fwl）
                T.Util.setUserBehaviorList({
                    "busId":"banner",
                    "conductCode": "banner_fwl",
                    "comductDesc": "banner内每个页面的PV/UV",
                    "time": new Date().getTime()
                });
            },
            //加载缓存
            loadCache:function(){
                var content = T.Storage.get("signContent");
                if(content){
                    $("#content").html(content);
                }
            },
            //事件绑定
            bindEvent:function(){
                //签到
                $("#signBtn").off().Touch(function(el){
                    if(!$(el).hasClass('sign-sign_over_btn')){
                        o.sign();
                    }
                });
                //兑换
                $(".sign-gzDown").off().Touch(function(){
                    $('#ruleBox').show();
                    $('.mask').show();
                });
                $(".sign-gzUP").off().Touch(function(){
                    $('#ruleBox').hide();
                    $('.mask').hide();
                });
                $('.mask').off().Touch(function(){
                    if($('#ruleBox').css('display')=='block'){
                        $('#ruleBox').hide();
                        $('.mask').hide();
                    }
                });
            },
            //签到日期格式化
            daysFormat:function(days){
                var daysArr = String(days).split("");
                if(days < 10){
                    return '<em>' + 0 + '</em>' + '<em>' + daysArr[0] + '</em>';
                }else{
                    return '<em>' + daysArr[0] + '</em>' + '<em>' + daysArr[1] + '</em>';
                }
            },
            //获取签到列表
            getSignList:function(){
                T.Util.xmlHttpRequest({
                    type:'get',
                    errorType:1,
                    reqUrl:"/user/services/activity/sign/info.json",
                    callback:function(json){
                        var d = json.res_data.value.SIGN_LIST;
                        signCount = json.res_data.value.SIGN_COU;
                        var RECIVE_LIST = json.res_data.value.RECIVE_LIST;
                        var htmlArr=[];
                        htmlArr.push('<div class="sing_cont_line">');
                        for(var i in d){
                            var imgNum = 6;
                            if(i==1){
                                imgNum = 1;
                            }else if(i==2||i==3){
                                imgNum = 2;
                            }else if(i==4){
                                imgNum = 3;
                            }else if(i==5){
                                imgNum = 4;
                            }else if(i==6){
                                imgNum = 5;
                            }
                            var listClsStr = 'sign-info'+imgNum;
                            var isOver ='';
                            if(json.res_data.value.RECIVE_COU>i-1){
                                isOver='over';
                            }
                            if(json.res_data.value.IS_RECIVE==1){//已领取
                                $('#signBtn').addClass('sign-sign_over_btn').removeClass('sign-sign_btn');
                            }else{
                                if(json.res_data.value.RECIVE_COU==i-1){//未领取的 当天可以领取的样式
                                    isOver='ok';
                                }
                                if(i==7&&json.res_data.value.RECIVE_COU>6){
                                    isOver='ok';
                                }
                                $('#signBtn').addClass('sign-sign_btn').removeClass('sign-sign_over_btn');
                            }
                            var ciStr = '第'+(i)+'天';
                            if(i==7){
                                ciStr = '第7天及以上';
                            }
                            var REWARD_DESC = d[i][0].REWARD_DESC;
                            if(d[i].length>1){
                                if(d[i][1].REWARD_DESC.indexOf('刮刮卡')>-1){
                                    REWARD_DESC = d[i][0].REWARD_DESC+'+'+d[i][1].REWARD_DESC;
                                }else{
                                    REWARD_DESC = d[i][1].REWARD_DESC+'+'+d[i][0].REWARD_DESC;}
                            }
                            htmlArr.push('<div class="sing_cont_el '+isOver+'" data-length="'+d[i].length+'">\
                                <div class="cont_num">'+ciStr+'</div>\
                                <span class="'+listClsStr+'"></span>\
                                <div class="cont_cont">'+REWARD_DESC+'</div>\
                            </div>');
                            if(i==4){
                                htmlArr.push('</div><div class="sing_cont_line line2">');
                            }
                        }
                        htmlArr.push('</div>');
                        $('#singContBox').html(htmlArr.join(''));
                        if(!signCount || T.Util.isEmpty(signCount)){
                            $('#singCount').html('--');
                        }else{
                            $('#singCount').html(o.daysFormat(signCount));
                        }

                        var dd = json.res_data.value.SIGN_ADD_LIST;
                        var jd = (signCount/30)<0.05?0.05:signCount/30;
                        $('.sing_jd').css({'width':jd*100+'%'});
                        $('.sing_jd_bg').css({'width':((jd*100)+2)+'%'});
                        var htmlArrDD = [];
                        for(var m=0;m<dd.length;m++){
                            var clsStr = 'sign-info'+dd[m].DAYS;
                            if(signCount>=dd[m].DAYS){//签到天数小于领取天数 不可领取状态
                                clsStr = 'sign-info'+dd[m].DAYS+' shake';
                            }
                            if( RECIVE_LIST&& RECIVE_LIST.length>0){//存在领取过的数组 已领取状态
                                for(var n=0;n<RECIVE_LIST.length;n++){
                                    if(RECIVE_LIST[n]==dd[m].DAYS){
                                        clsStr = 'sign-info'+dd[m].DAYS+'a';
                                    }
                                }
                            }
                            htmlArrDD.push('<div><span class="'+clsStr+'" data-DAYS="'+dd[m].DAYS+'"></span><p>'+dd[m].REWARD_DESC+'</p></div>');
                        }
                        $('#singContBoxA').html(htmlArrDD.join(''));
                        $('.shake').off().Touch(function (el) {//可开宝箱
                            o.userSignAdd($(el).attr('data-DAYS'));
                        });
                    },
                    errorCallback:function(data){

                    }
                });
            },
            signAlert1:function (str) {//弹层1
                $('.signAlert1 em').html(str);
                $('.mask').show();
                $('.signAlert1').show().siblings().hide();
                $('.signAlert1').off().Touch(function (el) {
                    $(el).hide();
                    $('.mask').hide();
                });
            },
            getHotAuction:function () {
                T.Util.xmlHttpRequest({
                    type:'get',
                    reqUrl:'/commodity/services/product/signHot.json',
                    callback:function(data){
                        var dd = data.res_data.value.INFO[0];
                        $(".alertHot").removeClass('over');
                        $('.alertHot').attr('id',dd.COMMODITY_ID);
                        $('.alertHot').attr('EXPECT_ID',dd.EXPECT_ID);
                        $('.hotImg').attr('src',dd.COMMODITY_LOGO);
                        $('.hotTitle').html(dd.COMMODITY_NAME);
                        $('.hotHistory').html('上期拍中价格:￥'+(dd.PRE_AUCTION_PRICE?dd.PRE_AUCTION_PRICE.toFixed(2):""));
                        $('.hotPrice').html('当前竞拍价:<em>￥'+dd.AUCTION_PRICE.toFixed(2)+'</em>');
                        o.getInfo();
                    },
                    errorCallback:function(data,xhr,textStatus){

                    }
                })
            },
            getInfo:function () {
                var setIntervalAA  = setInterval(function () {
                    T.Util.xmlHttpRequest({
                        type:'get',
                        errorType:1,
                        reqUrl:'/commodity/services/template/GET_EXPECT_INFO.json?commodityId='+$(".alertHot").attr("data-id"),
                        callback:function(data){
                            var d = data.res_data[0];
                            if(d.expectStatus==200||($(".alertHot").attr("EXPECT_ID")!=d.expectId)){//已拍中       期号不一样
                                window.clearInterval(setIntervalAA);
                                $(".alertHot").addClass('over');
                                setTimeout(function () {
                                    o.getHotAuction();
                                },3000);//3秒之后获取热拍第一个商品
                            }else{
                                $('.hotPrice em').html('￥'+(d.auctionPrice*1).toFixed(2));
                            }

                        },
                        errorCallback:function(data){
                            console.log(data);
                        }
                    });
                },1500);
            },
            alertBind:function () {
                $('.sign-newUser,#ggg.NEW').off().Touch(function (el) {//新手推荐
                    $('.signAlert').hide();
                    $('.mask').hide();
                    T.Util.openWindow(T.Util.getRootPath()+'/'+Global.webRoot+'/view/go.html#page=newUser.html');
                });
                $('#ggg.HASMORE').off().Touch(function () {//关闭
                    $('.signAlert').hide();
                    $('.mask').hide();
                });
                $('#ggg.AUCTION').off().Touch(function () {//去首页
                    $('.signAlert').hide();
                    $('.mask').hide();
                    T.Util.goTabbar('0');
                });
                $('.alertHot').off().Touch(function (el) {//热拍 商品详情
                    $('.signAlert').hide();
                    $('.mask').hide();
                    T.Util.openWindow(T.Util.getRootPath()+'/'+Global.webRoot+'/view/go.html#page=goodsDetail.html&id='+$(el).attr("data-id")+'&isNext=1');
                });
                $('.getMoreOne,#ggg.MORE').off().Touch(function (el) {//跳转邀请好友分享
                    $('.signAlert').hide();
                    $('.mask').hide();
                    T.Util.openWindow(T.Util.getRootPath()+'/'+Global.webRoot+'/activity/invite.html');
                });
                $('.getMoreTwo').off().Touch(function (el) {//引导去晒单
                    $('.signAlert').hide();
                    $('.mask').hide();
                    T.Util.openWindow(T.Util.getRootPath()+'/'+Global.webRoot+'/view/go.html#page=goodsRecord.html&type=overOk');
                });
            },
            signAlert:function (str,type,signType) {//弹层2
                $('.signAlert p').html(str);
                $('.mask').show();
                $('.signAlert').show().siblings().hide();
                $('.signAlert .alertClose').off().Touch(function (el) {
                    $('.signAlert').hide();
                    $('.mask').hide();
                });
                if(!signType || signType!='ggk'){
                    if(type=='GOLD_AUCTION'){//
                        o.getInfo();
                    }
                    o.alertBind();
                }
            },
            //领宝箱
            userSignAdd:function(day){
                if(T.Util.isEmpty(T.Storage.get('access_token'))){
                    T.Util.login();
                    return;
                }
                tip('领取奖励中','loading');
                T.Util.xmlHttpRequest({
                    type:'get',
                    errorType:1,
                    reqUrl:"/user/services/activity/sign/recive.json?signCode=USER_SIGN_ADD&sernum="+day,
                    callback:function(data){
                        $("#tipBox.loading").remove();

                        $('[data-Days="'+day+'"]').removeClass().addClass('sign-info'+day+'a');// 领取成功去处样式
                        var d = data.res_data.value.NOTE;
                        if($('#signBtn').hasClass('sign-sign_btn')||$('#singContBoxA .shake').length>0){//还有未领取的奖励
                            o.signAlert1(data.res_data.value.REWARD_LIST[0].REWARD_DESC);
                        }else{
                            if(d.TYPE=='IS_NEW'){//触发新用户弹层
                                $('.alertTitle').html('新手福利');
                                $('.alertCont').html('<span class="sign-newUser"></span>');
                            }else if(d.TYPE=='GOLD_AUCTION'){//触发老用户热拍ui 所有余额大于10
                                $('.alertTitle').html('热拍商品');
                                var item = d.NOTE_INFO;
                                $('.alertCont').html('<div class="alertHot" data-id="'+item.COMMODITY_ID+'" EXPECT_ID="'+item.EXPECT_ID+'">\
                                    <i class="hotOverIcon"></i><img class="hotImg" src="'+item.COMMODITY_LOGO+'">\
                                    <div class="hotCont">\
                                    <span class="hotTitle">'+item.COMMODITY_NAME+'</span>\
                                <span class="hotHistory">上期拍中价格:￥'+(item.PRE_AUCTION_PRICE?item.PRE_AUCTION_PRICE.toFixed(2):"")+'</span>\
                                <span class="hotPrice">当前竞拍价:<em>￥'+item.AUCTION_PRICE.toFixed(2)+'</em></span>\
                                </div>\
                                </div>');
                            }else{//触发老用户获取币ui 所有余额小于10
                                var item = d.TASK_INFO;
                                var isFinishShare = false;
                                for(var i =0;i<item.length;i++){
                                    if(item[i].type=='DAY_SHARE'&&item[i].isFinish==1){
                                        isFinishShare = true;
                                    }
                                }
                                var shareStr ='<span>1赠币</span>';;
                                if(isFinishShare){
                                    shareStr='<span style="color: #999;">已完成</span>';
                                }
                                $('.alertTitle').html('更多获币方式');
                                /* if((T.isNative && Global.isAndroid && (T.Util.getAppVersion()==100||T.Util.getAppVersion()==101)) || (T.isNative&&Global.isiOS &&(T.Util.getAppVersion()==100))){
                                 $('.alertCont').html('<div class="alertGetMore"><div class="getMoreTwo">拍中晒单奖励<span>8赠币</span><i></i></div></div>');
                                 }else{*/
                                $('.alertCont').html('<div class="alertGetMore">\
                                    <div class="getMoreOne">每日首次分享'+shareStr+'<i></i></div>\
                                <div class="getMoreTwo">拍中晒单奖励<span>8赠币</span><i></i></div>\
                                </div>');
                                //   }

                            }
                            o.signAlert(data.res_data.value.REWARD_LIST[0].REWARD_DESC,d.TYPE);//获取到的弹层
                        }
                        // o.getSignList();//刷新签到礼包列表
                    },
                    errorCallback:function(data){
                        $("#tipBox.loading").remove();
                        tip(data.msg);
                    }
                });
            },
            //签到
            sign:function(){
                if(T.Util.isEmpty(T.Storage.get('access_token'))){
                    T.Util.login();
                    return;
                }
                tip('领取奖励中','loading');
                T.Util.xmlHttpRequest({
                    type:'get',
                    errorType:1,
                    reqUrl:"/user/services/activity/sign/recive.json?signCode=USER_SIGN",
                    callback:function(data){
                        $("#tipBox.loading").remove();
                        var d = data.res_data.value.NOTE;
                        $('#signBtn').addClass('sign-sign_over_btn').removeClass('sign-sign_btn');
                        var signType = '';
                        if($('.sing_cont_el.ok').attr('data-length')>1 || signCount>7){//c存在刮刮卡
                            signType = 'ggk';
                        }
                        $('.sing_cont_el.ok').removeClass('ok').addClass('over');
                        if(signType == 'ggk'){//c存在刮刮卡
                            $('.alertTitle').html('刮刮卡');
                            var fDesc ='';
                            var ggkBtn ='关闭';//默认存在宝箱 刮刮卡完了 关闭该层
                            var gggCls ='HASMORE';
                            if($('#singContBoxA .shake').length==0){//领取奖励之后不存在宝箱
                                if(d.TYPE=='IS_NEW'){//触发新用户弹层
                                    ggkBtn = '新用户福利拍';
                                    gggCls = 'NEW';
                                }else if(d.TYPE=='GOLD_AUCTION'){//触发老用户热拍ui 所有余额大于10
                                    ggkBtn = '去竞拍热门商品';
                                    gggCls = 'AUCTION';
                                }else{//触发老用户获取币ui 所有余额小于10
                                    ggkBtn = '获取更多赠币';
                                    gggCls = 'MORE';
                                }
                            }
                            var ggkDesc = '',ggkId='';
                            var reward=data.res_data.value.REWARD_LIST;
                            for(var i=0;i<reward.length;i++){
                                if(reward[i].REWARD_CODE=='ACTIVITY_GUAGUA_LOTTERY'){//刮刮卡奖励
                                    ggkDesc = reward[i].REWARD_DESC;
                                    ggkId = reward[i].ID;
                                }else{//正常奖励
                                    fDesc = reward[i].REWARD_DESC;
                                }
                            };
                            var rewardStr = '恭喜您获得'+ggkDesc;
                            if(ggkDesc=='0赠币'){
                                rewardStr = '未中奖';
                            }
                            $('.alertCont').html('<div class="gggBox sign-fb '+gggCls+'" id="ggg" data-id="'+ggkId+'">\
                                <div class="ggkDesc">'+rewardStr+'</div>\
                                <div class="ggkBtn">'+ggkBtn+'</div>\
                                <canvas id="c1" class="canvas"></canvas></div>');

                            var c1;				//画布
                            var ctx;			//画笔
                            var ismousedown;	//标志用户是否按下鼠标或开始触摸
                            var isOk=0;			//标志用户是否已经刮开了一半以上
                            var fontem = parseInt(window.getComputedStyle(document.documentElement, null)["font-size"])/2;
                            var hasRecive = false;
                            var hasTouch = false;
                            //鼠标按下 和 触摸开始
                            function eventDown(e){
                                e.preventDefault();
                                ismousedown=true;
                            }
                            //鼠标抬起 和 触摸结束
                            function eventUp(e){
                                e.preventDefault();
                                //得到canvas的全部数据
                                var a = ctx.getImageData(0,0,c1.width,c1.height);
                                var j=0;
                                for(var i=3;i<a.data.length;i+=4){
                                    if(a.data[i]==0)j++;
                                }
                                //当被刮开的区域等于一半时，则可以开始处理结果
                                if(j>=a.data.length/12){
                                    isOk = 1;
                                }
                                ismousedown=false;
                            }
                            //鼠标移动 和 触摸移动
                            function eventMove(e){
                                e.preventDefault();
                                if(ismousedown) {
                                    if(e.changedTouches){
                                        e=e.changedTouches[e.changedTouches.length-1];
                                    }
                                    var topY =$('canvas').offset().top;
                                    var topX =$('canvas').offset().left;
                                    //console.log('topY:'+topY+'topX:'+topX);
                                    var x = (e.clientX) - topX || 0,
                                        y = (e.clientY) - topY || 0;
                                    //console.log('x:'+x+'y:'+y);
                                    ctx.globalCompositeOperation = 'destination-out';
                                    ctx.lineJoin = 'round';
                                    ctx.lineCap = 'round';
                                    ctx.beginPath();
                                    ctx.arc(x, y, fontem, 0, Math.PI*2,true);
                                    ctx.closePath();
                                    ctx.fill();

                                    //start the path for a drag
                                    ctx.beginPath();
                                    ctx.moveTo(x, y);
                                }

                                if(isOk){
                                    if(!hasRecive){
                                        hasRecive = true;
                                        T.Util.xmlHttpRequest({
                                            type:'get',
                                            errorType:1,
                                            reqUrl:"/user/services/activity/reward/recive.json?rewardId="+ggkId,//领取接口
                                            callback:function(data){},
                                            errorCallback:function(data) {
                                                hasRecive = false;
                                                tip(data.msg);
                                            }
                                        });
                                    }
                                    if(!hasTouch){
                                        hasTouch = true;
                                        $('.ggkBtn').css({'z-index':'3'})
                                    }
                                    var btn = document.getElementsByClassName("ggkBtn");
                                    for(var i=0; i<btn.length; i++){
                                        btn[i].style.zIndex = '3';
                                    }
                                    document.getElementsByClassName("ggkBtn")[0].style.zIndex="3";
                                }

                            }
                            c1 = document.getElementById("c1");
                            c1 = document.getElementById("c1");
                            c1.width=6.973333*37.5*$('html').attr('data-dpr');
                            c1.height=2.866667*37.5*$('html').attr('data-dpr');
                            ctx = c1.getContext("2d");
                            var imgs = new Image();
                            imgs.src = "../img/activity/sign/bg.png";
                            imgs.onload = createPat;//图片加载完成再执行
                            function createPat(){
                                ctx.drawImage(imgs, 0, 0, c1.width, c1.height);
                                o.signAlert(fDesc,d.TYPE,signType);//获取到的弹层
                            }

                            c1.addEventListener("mousemove",eventMove,false);
                            c1.addEventListener("mousedown",eventDown,false);
                            c1.addEventListener("mouseup",eventUp,false);

                            //移动端的处理
                            c1.addEventListener('touchstart', eventDown,false);
                            c1.addEventListener('touchend', eventUp,false);
                            c1.addEventListener('touchmove', eventMove,false);

                           /* $('#ggg').wScratchPad({
                                //bg: '../img/activity/sign/fb.png',
                                fg: '../img/activity/sign/bg.png',
                                //'cursor': 'url("../img/activity/sign/hotOver.png") 5 5, default',
                                scratchMove: function (e, percent) {
                                    //$('#demo2-percent').html(percent);
                                    if(percent > 10){
                                        if(!hasRecive){
                                            hasRecive = true;
                                            T.Util.xmlHttpRequest({
                                                type:'get',
                                                errorType:1,
                                                reqUrl:"/user/services/activity/reward/recive.json?rewardId="+ggkId,//领取接口
                                                callback:function(data){},
                                                errorCallback:function(data) {
                                                    hasRecive = false;
                                                    tip(data.msg);
                                                }
                                            });
                                        }
                                    }
                                    if(percent > 30){//大于30 可以点击canvas
                                        if(!hasTouch){
                                            hasTouch = true;
                                            $('.ggkBtn').css({'z-index':'3'})
                                        }
                                    }
                                    if (percent > 70) {
                                        this.clear();
                                        o.alertBind();
                                    }
                                }
                            });*/
                            $('.ggkBtn').off().Touch(function(el){
                                if($(el).parent().hasClass('NEW')){
                                    $('.signAlert').hide();
                                    $('.mask').hide();
                                    T.Util.openWindow(T.Util.getRootPath()+'/'+Global.webRoot+'/view/go.html#page=newUser.html');
                                }
                                if($(el).parent().hasClass('HASMORE')){
                                    $('.signAlert').hide();
                                    $('.mask').hide();
                                }
                                if($(el).parent().hasClass('AUCTION')){
                                    $('.signAlert').hide();
                                    $('.mask').hide();
                                    T.Util.goTabbar('0');
                                }
                                if($(el).parent().hasClass('MORE')){
                                    $('.signAlert').hide();
                                    $('.mask').hide();
                                    T.Util.openWindow(T.Util.getRootPath()+'/'+Global.webRoot+'/activity/invite.html');
                                }
                            });

                        }else{
                            if($('#singContBoxA .shake').length>0){//签到完 还有未领取的包箱 弹层1
                                o.signAlert1(data.res_data.value.REWARD_LIST[0].REWARD_DESC);
                            }else{
                                if(d.TYPE=='IS_NEW'){//触发新用户弹层
                                    $('.alertTitle').html('新手福利');
                                    $('.alertCont').html('<span class="sign-newUser"></span>');
                                }else if(d.TYPE=='GOLD_AUCTION'){//触发老用户热拍ui 所有余额大于10
                                    $('.alertTitle').html('热拍商品');
                                    var item = d.NOTE_INFO;
                                    $('.alertCont').html('<div class="alertHot" data-id="'+item.COMMODITY_ID+'" EXPECT_ID="'+item.EXPECT_ID+'">\
                                    <i class="hotOverIcon"></i><img class="hotImg" src="'+item.COMMODITY_LOGO+'">\
                                    <div class="hotCont">\
                                    <span class="hotTitle">'+item.COMMODITY_NAME+'</span>\
                                <span class="hotHistory">上期拍中价格:￥'+(item.PRE_AUCTION_PRICE?item.PRE_AUCTION_PRICE.toFixed(2):"")+'</span>\
                                <span class="hotPrice">当前竞拍价:<em>￥'+item.AUCTION_PRICE.toFixed(2)+'</em></span>\
                                </div>\
                                </div>');

                                }else{//触发老用户获取币ui 所有余额小于10
                                    var item = d.TASK_INFO;
                                    var isFinishShare = false;
                                    for(var i =0;i<item.length;i++){
                                        if(item[i].type=='DAY_SHARE'&&item[i].isFinish==1){
                                            isFinishShare = true;
                                        }
                                    }
                                    var shareStr ='<span>1赠币</span>';;
                                    if(isFinishShare){
                                        shareStr='<span style="color: #999;">已完成</span>';
                                    }
                                    $('.alertTitle').html('更多获币方式');
                                    /*if((T.isNative && Global.isAndroid && (T.Util.getAppVersion()==100||T.Util.getAppVersion()==101)) || (T.isNative&&Global.isiOS &&(T.Util.getAppVersion()==100))){
                                     $('.alertCont').html('<div class="alertGetMore"><div class="getMoreTwo">拍中晒单奖励<span>8赠币</span><i></i></div></div>');
                                     }else{*/
                                    $('.alertCont').html('<div class="alertGetMore">\
                                    <div class="getMoreOne">每日首次分享'+shareStr+'<i></i></div>\
                                <div class="getMoreTwo">拍中晒单奖励<span>8赠币</span><i></i></div>\
                                </div>');
                                    //     }
                                }
                                o.signAlert(data.res_data.value.REWARD_LIST[0].REWARD_DESC,d.TYPE);//获取到的弹层
                            }
                        }

                    },
                    errorCallback:function(data){
                        $("#tipBox.loading").remove();
                        tip(data.msg);
                    }
                });
            },
        }

        return {
            signAlert:o.signAlert,
            signAlert1:o.signAlert1,
            init:o.init
        }
    })();

    $(document).ready(function () {
        if(T.isNative){
            T.appToH5.init(function () {//初始化事件回调函数
                T.sign.init();
            },function () {//webview再次打开回调函数
               /* if(T.Util.isEmpty(T.Storage.get('access_token'))){
                    T.Util.back();
                }else{

                }*/
                T.sign.init();
            },function () {//webview消失第一视角回调函数

            },function () {//app退到系统后台回调函数

            },function () {//app退到系统后台后重新回到app触发的函数

            });
        }else{
            T.sign.init();
        }
    });
</script>
</body>
</html>